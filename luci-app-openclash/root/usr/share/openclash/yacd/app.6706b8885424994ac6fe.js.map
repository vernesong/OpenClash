{"version":3,"sources":["webpack://yacd/./src/api/configs.ts","webpack://yacd/./src/api/connections.ts","webpack://yacd/./src/api/traffic.ts","webpack://yacd/./src/misc/i18n.ts","webpack://yacd/./src/api/version.ts","webpack://yacd/./src/components/about/About.module.css?d14c","webpack://yacd/./src/components/about/About.tsx","webpack://yacd/./src/components/shared/Head.tsx","webpack://yacd/./src/misc/query.ts","webpack://yacd/./src/store/index.ts","webpack://yacd/./src/hooks/basic.ts","webpack://yacd/./src/components/BackendList.module.css?5bc9","webpack://yacd/./src/components/BackendList.tsx","webpack://yacd/./src/components/APIConfig.module.css?c176","webpack://yacd/./src/components/Field.module.css?21e7","webpack://yacd/./src/components/Field.tsx","webpack://yacd/./src/components/APIConfig.tsx","webpack://yacd/./src/misc/errors.ts","webpack://yacd/./src/components/APIDiscovery.module.css?2560","webpack://yacd/./src/components/Modal.tsx","webpack://yacd/./src/components/APIDiscovery.tsx","webpack://yacd/./src/components/ErrorBoundaryFallback.module.css?d55c","webpack://yacd/./src/components/SvgGithub.tsx","webpack://yacd/./src/components/ErrorBoundaryFallback.tsx","webpack://yacd/./src/components/ErrorBoundary.tsx","webpack://yacd/./src/components/Home.module.css?9857","webpack://yacd/./src/components/Loading.module.css?820a","webpack://yacd/./src/components/Loading.tsx","webpack://yacd/./src/components/TrafficChart.tsx","webpack://yacd/./src/components/TrafficNow.module.css?e26a","webpack://yacd/./src/components/TrafficNow.tsx","webpack://yacd/./src/components/Home.tsx","webpack://yacd/./src/components/Loading2.module.css?e949","webpack://yacd/./src/components/Loading2.tsx","webpack://yacd/./src/components/Root.module.css?6f8e","webpack://yacd/./src/components/SideBar.module.css?e4c9","webpack://yacd/./src/components/SideBar.tsx","webpack://yacd/./src/components/StyleGuide.tsx","webpack://yacd/./src/components/Root.tsx","webpack://yacd/./src/swRegistration.ts","webpack://yacd/./src/app.tsx","webpack://yacd/./src/components/Button.module.css?8812","webpack://yacd/./src/components/Button.tsx","webpack://yacd/./src/components/ContentHeader.module.css?8f18","webpack://yacd/./src/components/ContentHeader.tsx","webpack://yacd/./src/components/Input.module.css?0c7c","webpack://yacd/./src/components/Input.tsx","webpack://yacd/./src/components/StateProvider.tsx","webpack://yacd/./src/components/SvgYacd.module.css?a398","webpack://yacd/./src/components/SvgYacd.tsx","webpack://yacd/./src/components/SwitchThemed.tsx","webpack://yacd/./src/components/ToggleSwitch.module.css?f7c7","webpack://yacd/./src/components/ToggleSwitch.tsx","webpack://yacd/./src/components/shared/Basic.module.css?f416","webpack://yacd/./src/components/shared/Basic.tsx","webpack://yacd/./src/hooks/useLineChart.ts","webpack://yacd/./src/misc/chart.ts","webpack://yacd/./src/misc/motion.ts","webpack://yacd/./src/misc/createResource.ts","webpack://yacd/./src/misc/pretty-bytes.ts","webpack://yacd/./src/misc/request-helper.ts","webpack://yacd/./src/misc/utils.ts","webpack://yacd/./src/misc/storage.ts","webpack://yacd/./src/store/app.ts","webpack://yacd/./src/store/configs.ts","webpack://yacd/./src/store/logs.ts","webpack://yacd/./src/store/modals.ts","webpack://yacd/./src/api/proxies.ts","webpack://yacd/./src/store/proxies.tsx","webpack://yacd/./src/components/Modal.module.css?2f6d","webpack://yacd/webpack/runtime/startup prefetch"],"names":["endpoint","fetchConfigs","apiConfig","getURLAndInit","url","init","fetch","configsPatchWorkaround","o","updateConfigs","body","JSON","stringify","method","wsState","subscribers","fetchData","listener","subscribe","buildWebSocketURL","ws","WebSocket","addEventListener","event","s","parse","err","console","log","forEach","f","appendData","data","push","idx","indexOf","splice","closeAllConnections","fetchConns","closeConnById","id","baseURL","textDecoder","TextDecoder","Size","traffic","labels","Array","up","down","size","this","t","Date","l","getMinutes","getSeconds","length","shift","fetched","decoded","parseAndAppend","x","pump","reader","read","then","done","value","str","decode","stream","splits","split","lastSplit","i","_ev","response","ok","getReader","fetchDataWithFetch","allLocales","zh","en","i18next","HttpBackend","use","initReactI18next","LanguageDetector","debug","process","backend","loadPath","request","_options","_payload","callback","p","mod","status","supportedLngs","fallbackLng","interpolation","escapeValue","json","res","Version","name","link","version","className","href","target","rel","About","connect","getClashAPIConfig","props","useQuery","fetchVersion","ContentHeader","title","__VERSION__","Head","apiConfigs","getClashAPIConfigs","URL","host","e","Helmet","queryCache","QueryCache","queryClient","QueryClient","defaultOptions","queries","suspense","initialState","app","modals","configs","proxies","logs","actions","selectChartStyleIndex","updateAppConfig","updateCollapsibleIsOpen","removeClashAPIConfig","selectClashAPIConfig","proxiesActions","useState","React","useCallback","BackendList","selectedClashAPIConfigIndex","getSelectedClashAPIConfigIndex","useStoreActions","onRemove","conf","onSelect","map","item","cx","secret","Item","disableRemove","isOn","setState","toggle","useToggle","show","Icon","EyeOff","Eye","handleTap","stopPropagation","Button","disabled","onClick","tabIndex","role","onKeyUp","children","Field","label","onChange","valueOnChange","labelClassName","htmlFor","useRef","dispatch","setBaseURL","setSecret","errMsg","setErrMsg","userTouchedFlagRef","contentEl","handleInputOnChange","current","Error","onConfirm","verify","ret","addClashAPIConfig","handleContentOnKeyDown","Element","tagName","toUpperCase","key","s0","ref","onKeyDown","SvgYacd","width","height","type","style","prefix","substring","statusText","errors","message","detail","default","ModalAPIConfig","isOpen","onRequestClose","overlayClassName","otherProps","contentCls","overlayCls","useEffect","window","code","closeApiConfigModal","closeModal","Modal","shouldCloseOnOverlayClick","shouldCloseOnEsc","SvgGithub","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","error","state","useMemo","chartWrapperStyle","position","maxWidth","selectedChartStyleIndex","getSelectedChartStyleIndex","Chart","chartJSResource","useTranslation","datasets","commonDataSetProps","chartStyles","useLineChart","upStr","downStr","speed","setSpeed","prettyBytes","useSpeed","upTotal","dlTotal","connNumber","downloadTotal","uploadTotal","connections","connAPI","useConnection","Home","TrafficNow","Suspense","fallback","TrafficChart","animate","c0","c1","icons","activity","FcAreaChart","globe","FcGlobe","command","FcRuler","file","FcDocument","settings","FcSettings","FcLink","SideBarRow","isActive","to","iconId","labelText","Comp","pages","MoonA","motion","framerMotionResouce","path","initial","rotate","transition","duration","Sun","cy","r","g","scale","x1","y1","x2","y2","theme","getTheme","location","useLocation","switchThemeHooked","switchTheme","pathname","aria-label","noop","paneStyle","padding","optionsRule","Pane","SwitchExample","onoff","setonoff","handleChange","checked","SwitchThemed","PureComponent","Connections","lazy","Config","Logs","Proxies","Rules","routes","element","filter","Boolean","RouteInnerApp","useRoutes","SideBarApp","Loading2","App","StateProvider","QueryClientProvider","client","isLocalhost","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","rootEl","document","getElementById","ReactDOM","render","origin","headers","contentType","get","ready","unregister","reload","checkValidServiceWorker","swRegistration","forwardRef","ButtonInternal","text","start","isLoading","kind","restProps","internalProps","internalOnClick","btnClassName","display","opacity","Input","SelfControlledInput","internalValue","setInternalValue","refValue","immer","createContext","memo","useContext","StateContext","DispatchContext","ActionsContext","Provider","stateRef","getState","actionId","fn","stateNext","produce","boundActions","bindActions","mapStateToProps","Component","MemoComponent","mapped","nextProps","bindAction","action","args","apply","faceClasName","fillRule","offColor","uncheckedIcon","checkedIcon","onColor","offHandleColor","onHandleColor","handleDiameter","ToggleSwitch","options","idxSelected","getPortionPercentage","w","Math","floor","sliderStyle","left","SectionNameType","LoadingDot","commonChartOptions","elementId","subscription","extraChartOptions","ctx","getContext","c","unsubscribe","update","destroy","createResource","borderWidth","lineTension","pointRadius","responsive","maintainAspectRatio","legend","fontColor","boxWidth","tooltips","enabled","mode","intersect","animationDuration","hover","scales","xAxes","gridLines","yAxes","color","borderDash","drawBorder","ticks","backgroundColor","borderColor","getPromise","cache","inflight","load","val","preload","undefined","clear","UNITS","n","exponent","min","log10","Number","pow","toPrecision","headersCommon","genCommonHeaders","h","qs","encodeURIComponent","protocol","trimTrailingSlash","debounce","timeout","timeoutId","clearTimeout","setTimeout","replace","StorageKey","saveState","serialized","localStorage","setItem","clashAPIConfigs","getLatencyTestUrl","latencyTestUrl","getCollapsibleIsOpen","collapsibleIsOpen","getProxySortBy","proxySortBy","getHideUnavailableProxies","hideUnavailableProxies","getAutoCloseOldConns","autoCloseOldConns","saveStateDebounced","findClashAPIConfigIndex","arr","clashAPIConfig","addedAt","now","bodyElement","setTheme","classList","remove","add","v","defaultState","getAttribute","getItem","loadState","query","search","collector","k","parseConfigQueryString","port","getConfigs","getLogLevel","configsAPI","openModal","payload","haveFetchedConfig","trafficAPI","partialConfg","getLogs","getTail","tail","getSearchText","searchText","getLogsForDisplay","createSelector","LogSize","toLowerCase","updateSearchText","appendLog","tailCurr","modalName","fetchProxies","requestToSwitchProxy","name1","name2","fullURL","requestDelayForProxy","fetchProviderProxies","providers","updateProviderByName","healthcheckProviderByName","delay","groupNames","showModalClosePrevConns","NonProxyTypes","getProxies","getDelay","getProxyGroupNames","getProxyProviders","proxyProviders","getDangleProxyNames","dangleProxyNames","getShowModalClosePrevConns","Promise","all","proxiesAPI","proxiesData","providersData","formatProxyProviders","providerProxies","retrieveGroupNamesFrom","proxyNames","delayPrev","delayNext","history","number","updateProviders","names","healthcheckProviderByNameInternal","groupName","exceptionItemName","idsToClose","conn","chains","switchProxyImpl","itemName","closePrevConns","closeModalClosePrevConns","switchTo","chain","child","childKey","unshift","resolveChain","closeGroupConns","switchProxy","requestDelayForProxyOnce","requestDelayAll","globalAll","prop","isArray","sort","a","b","group","providersInput","keys","Object","provider","vehicleType","proxiesArr","j","proxy","requestDelayForProxies","works","closePrevConnsAndTheModal","switchProxyCtx","proxyFilterText","atom","startup","__webpack_require__","result","E"],"mappings":"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","file":"app.6706b8885424994ac6fe.js","sourcesContent":["import { getURLAndInit } from 'src/misc/request-helper';\nimport { ClashGeneralConfig } from 'src/store/types';\nimport { ClashAPIConfig } from 'src/types';\n\nconst endpoint = '/configs';\n\nexport async function fetchConfigs(apiConfig: ClashAPIConfig) {\n  const { url, init } = getURLAndInit(apiConfig);\n  return await fetch(url + endpoint, init);\n}\n\n// TODO support PUT /configs\n// req body\n// { Path: string }\n\ntype ClashConfigPartial = Partial<ClashGeneralConfig>;\nfunction configsPatchWorkaround(o: ClashConfigPartial) {\n  // backward compatibility for older clash  using `socket-port`\n  if ('socks-port' in o) {\n    o['socket-port'] = o['socks-port'];\n  }\n  return o;\n}\n\nexport async function updateConfigs(\n  apiConfig: ClashAPIConfig,\n  o: ClashConfigPartial\n) {\n  const { url, init } = getURLAndInit(apiConfig);\n  const body = JSON.stringify(configsPatchWorkaround(o));\n  return await fetch(url + endpoint, { ...init, body, method: 'PATCH' });\n}\n","import { ClashAPIConfig } from 'src/types';\n\nimport { buildWebSocketURL, getURLAndInit } from '../misc/request-helper';\n\nconst endpoint = '/connections';\n\nconst fetched = false;\nconst subscribers = [];\n\n// see also https://github.com/Dreamacro/clash/blob/dev/constant/metadata.go#L41\ntype UUID = string;\ntype ConnNetwork = 'tcp' | 'udp';\ntype ConnType = 'HTTP' | 'HTTP Connect' | 'Socks5' | 'Redir' | 'Unknown';\nexport type ConnectionItem = {\n  id: UUID;\n  metadata: {\n    network: ConnNetwork;\n    type: ConnType;\n    sourceIP: string;\n    destinationIP: string;\n    sourcePort: string;\n    destinationPort: string;\n    host: string;\n  };\n  upload: number;\n  download: number;\n  // e.g. \"2019-11-30T22:48:13.416668+08:00\",\n  start: string;\n  chains: string[];\n  // e.g. 'Match', 'DomainKeyword'\n  rule: string;\n};\ntype ConnectionsData = {\n  downloadTotal: number;\n  uploadTotal: number;\n  connections: Array<ConnectionItem>;\n};\n\nfunction appendData(s: string) {\n  let o: ConnectionsData;\n  try {\n    o = JSON.parse(s);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.log('JSON.parse error', JSON.parse(s));\n  }\n  subscribers.forEach((f) => f(o));\n}\n\ntype UnsubscribeFn = () => void;\n\nlet wsState: number;\nexport function fetchData(\n  apiConfig: ClashAPIConfig,\n  listener: unknown\n): UnsubscribeFn | void {\n  if (fetched || wsState === 1) {\n    if (listener) return subscribe(listener);\n  }\n  wsState = 1;\n  const url = buildWebSocketURL(apiConfig, endpoint);\n  const ws = new WebSocket(url);\n  ws.addEventListener('error', () => (wsState = 3));\n  ws.addEventListener('message', (event) => appendData(event.data));\n  if (listener) return subscribe(listener);\n}\n\nfunction subscribe(listener: unknown): UnsubscribeFn {\n  subscribers.push(listener);\n  return function unsubscribe() {\n    const idx = subscribers.indexOf(listener);\n    subscribers.splice(idx, 1);\n  };\n}\n\nexport async function closeAllConnections(apiConfig: ClashAPIConfig) {\n  const { url, init } = getURLAndInit(apiConfig);\n  return await fetch(url + endpoint, { ...init, method: 'DELETE' });\n}\n\nexport async function fetchConns(apiConfig: ClashAPIConfig) {\n  const { url, init } = getURLAndInit(apiConfig);\n  return await fetch(url + endpoint, { ...init });\n}\n\nexport async function closeConnById(apiConfig: ClashAPIConfig, id: string) {\n  const { url: baseURL, init } = getURLAndInit(apiConfig);\n  const url = `${baseURL}${endpoint}/${id}`;\n  return await fetch(url, { ...init, method: 'DELETE' });\n}\n","import { buildWebSocketURL, getURLAndInit } from '../misc/request-helper';\nconst endpoint = '/traffic';\nconst textDecoder = new TextDecoder('utf-8');\n\nconst Size = 150;\n\nconst traffic = {\n  labels: Array(Size),\n  // labels: [],\n  up: Array(Size),\n  down: Array(Size),\n\n  size: Size,\n  subscribers: [],\n  appendData(o) {\n    this.up.push(o.up);\n    this.down.push(o.down);\n    const t = new Date();\n    const l = '' + t.getMinutes() + t.getSeconds();\n    this.labels.push(l);\n    if (this.up.length > this.size) this.up.shift();\n    if (this.down.length > this.size) this.down.shift();\n    if (this.labels.length > this.size) this.labels.shift();\n\n    this.subscribers.forEach((f) => f(o));\n  },\n\n  subscribe(listener) {\n    this.subscribers.push(listener);\n    return () => {\n      const idx = this.subscribers.indexOf(listener);\n      this.subscribers.splice(idx, 1);\n    };\n  },\n};\n\nlet fetched = false;\nlet decoded = '';\n\nfunction parseAndAppend(x) {\n  traffic.appendData(JSON.parse(x));\n}\n\nfunction pump(reader) {\n  return reader.read().then(({ done, value }) => {\n    const str = textDecoder.decode(value, { stream: !done });\n    decoded += str;\n\n    const splits = decoded.split('\\n');\n\n    const lastSplit = splits[splits.length - 1];\n\n    for (let i = 0; i < splits.length - 1; i++) {\n      parseAndAppend(splits[i]);\n    }\n\n    if (done) {\n      parseAndAppend(lastSplit);\n      decoded = '';\n\n      // eslint-disable-next-line no-console\n      console.log('GET /traffic streaming done');\n      fetched = false;\n      return;\n    } else {\n      decoded = lastSplit;\n    }\n    return pump(reader);\n  });\n}\n\n// 1 OPEN\n// other value CLOSED\n// similar to ws readyState but not the same\n// https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/readyState\nlet wsState;\nfunction fetchData(apiConfig) {\n  if (fetched || wsState === 1) return traffic;\n  wsState = 1;\n  const url = buildWebSocketURL(apiConfig, endpoint);\n  const ws = new WebSocket(url);\n  ws.addEventListener('error', function (_ev) {\n    wsState = 3;\n  });\n  ws.addEventListener('close', function (_ev) {\n    wsState = 3;\n    fetchDataWithFetch(apiConfig);\n  });\n  ws.addEventListener('message', function (event) {\n    parseAndAppend(event.data);\n  });\n  return traffic;\n}\n\nfunction fetchDataWithFetch(apiConfig) {\n  if (fetched) return traffic;\n  fetched = true;\n  const { url, init } = getURLAndInit(apiConfig);\n  fetch(url + endpoint, init).then(\n    (response) => {\n      if (response.ok) {\n        const reader = response.body.getReader();\n        pump(reader);\n      } else {\n        fetched = false;\n      }\n    },\n    (err) => {\n      // eslint-disable-next-line no-console\n      console.log('fetch /traffic error', err);\n      fetched = false;\n    }\n  );\n  return traffic;\n}\n\nexport { fetchData };\n","import i18next from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport HttpBackend from 'i18next-http-backend';\nimport { initReactI18next } from 'react-i18next';\n\nconst allLocales = {\n  zh: import('src/i18n/zh'),\n  en: import('src/i18n/en'),\n};\n\ntype BackendRequestCallback = (\n  err: null,\n  result: { status: number; data: any }\n) => void;\n\ni18next\n  .use(HttpBackend)\n  .use(initReactI18next)\n  .use(LanguageDetector)\n  .init({\n    debug: process.env.NODE_ENV === 'development',\n    // resources,\n    backend: {\n      loadPath: '/__{{lng}}/{{ns}}.json',\n      request: function (\n        _options: any,\n        url: string,\n        _payload: any,\n        callback: BackendRequestCallback\n      ) {\n        let p: PromiseLike<{ data: any }>;\n\n        switch (url) {\n          case '/__zh/translation.json':\n          case '/__zh-CN/translation.json':\n            p = allLocales.zh;\n            break;\n          case '/__en/translation.json':\n          default:\n            p = allLocales.en;\n            break;\n        }\n\n        if (p) {\n          p.then((mod) => {\n            callback(null, { status: 200, data: mod.data });\n          });\n        }\n      },\n    },\n    supportedLngs: ['en', 'zh-CN'],\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false,\n    },\n  });\n\nif (process.env.NODE_ENV === 'development') {\n  window.i18n = i18next;\n}\n\nexport default i18next;\n","import { getURLAndInit } from 'src/misc/request-helper';\nimport { ClashAPIConfig } from 'src/types';\n\ntype VersionData = {\n  version?: string;\n  premium?: boolean;\n};\n\nexport async function fetchVersion(\n  endpoint: string,\n  apiConfig: ClashAPIConfig\n): Promise<VersionData> {\n  let json = {};\n  try {\n    const { url, init } = getURLAndInit(apiConfig);\n    const res = await fetch(url + endpoint, init);\n    if (res.ok) {\n      json = await res.json();\n    }\n  } catch (err) {\n    // log and ignore\n    // eslint-disable-next-line no-console\n    console.log(`failed to fetch ${endpoint}`, err);\n  }\n  return json;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cHbZy_rAHf\",\"mono\":\"_2SNe_x81Ib\",\"link\":\"LUI6m76ply\"};","import * as React from 'react';\nimport { GitHub } from 'react-feather';\nimport { useQuery } from 'react-query';\nimport { fetchVersion } from 'src/api/version';\nimport ContentHeader from 'src/components/ContentHeader';\nimport { connect } from 'src/components/StateProvider';\nimport { getClashAPIConfig } from 'src/store/app';\nimport { ClashAPIConfig } from 'src/types';\n\nimport s from './About.module.css';\n\ntype Props = { apiConfig: ClashAPIConfig };\n\nfunction Version({\n  name,\n  link,\n  version,\n}: {\n  name: string;\n  link: string;\n  version: string;\n}) {\n  return (\n    <div className={s.root}>\n      <h2>{name}</h2>\n      <p>\n        <span>Version </span>\n        <span className={s.mono}>{version}</span>\n      </p>\n      <p>\n        <a\n          className={s.link}\n          href={link}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <GitHub size={20} />\n          <span>Source</span>\n        </a>\n      </p>\n    </div>\n  );\n}\n\nfunction AboutImpl(props: Props) {\n  const { data: version } = useQuery(['/version', props.apiConfig], () =>\n    fetchVersion('/version', props.apiConfig)\n  );\n  return (\n    <>\n      <ContentHeader title=\"About\" />\n      {version && version.version ? (\n        <Version\n          name=\"Clash\"\n          version={version.version}\n          link=\"https://github.com/Dreamacro/clash\"\n        />\n      ) : null}\n      <Version\n        name=\"Yacd\"\n        version={__VERSION__}\n        link=\"https://github.com/haishanh/yacd\"\n      />\n    </>\n  );\n}\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n});\n\nexport const About = connect(mapState)(AboutImpl);\n","import * as React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { connect } from 'src/components/StateProvider';\nimport { getClashAPIConfig, getClashAPIConfigs } from 'src/store/app';\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n  apiConfigs: getClashAPIConfigs(s),\n});\n\nfunction HeadImpl({ apiConfig, apiConfigs }: { apiConfig: { baseURL: string }, apiConfigs: any[] }) {\n  let title = 'yacd';\n  if (apiConfigs.length > 1) {\n    try {\n      const host = new URL(apiConfig.baseURL).host;\n      title = `${host} - yacd`;\n    } catch (e) {\n      // ignore\n    }\n  }\n  return (\n    <Helmet>\n      <title>{title}</title>\n    </Helmet>\n  );\n}\n\nexport const Head = connect(mapState)(HeadImpl);\n","import { QueryCache, QueryClient } from 'react-query';\n\nconst queryCache = new QueryCache();\nexport const queryClient = new QueryClient({\n  queryCache,\n  defaultOptions: {\n    queries: {\n      suspense: true,\n    },\n  },\n});\n","import {\n  initialState as app,\n  removeClashAPIConfig,\n  selectChartStyleIndex,\n  selectClashAPIConfig,\n  updateAppConfig,\n  updateCollapsibleIsOpen,\n} from './app';\nimport { initialState as configs } from './configs';\nimport { initialState as logs } from './logs';\nimport { initialState as modals } from './modals';\nimport { actions as proxiesActions, initialState as proxies } from './proxies';\n\nexport const initialState = {\n  app: app(),\n  modals,\n  configs,\n  proxies,\n  logs,\n};\n\nexport const actions = {\n  selectChartStyleIndex,\n  updateAppConfig,\n\n  app: {\n    updateCollapsibleIsOpen,\n    updateAppConfig,\n    removeClashAPIConfig,\n    selectClashAPIConfig,\n  },\n  proxies: proxiesActions,\n};\n","import React from 'react';\n\nconst { useState, useCallback } = React;\n\nexport function useToggle(initialValue = false) {\n  const [isOn, setState] = useState(initialValue);\n  const toggle = useCallback(() => setState((x) => !x), []);\n  return [isOn, toggle];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"ul\":\"_1MP9tbO2C9\",\"li\":\"_39O4-s-qNw\",\"close\":\"_3U13UgV7Z1\",\"eye\":\"ipx6os2H89\",\"hasSecret\":\"_3GP8CDySTd\",\"url\":\"PK8GjRW5ZI\",\"secret\":\"_2-iwpHoCB6\",\"btn\":\"S1-PNvCcRP\"};","import cx from 'clsx';\nimport * as React from 'react';\nimport { Eye, EyeOff, X as Close } from 'react-feather';\nimport { useToggle } from 'src/hooks/basic';\nimport {\n  getClashAPIConfigs,\n  getSelectedClashAPIConfigIndex,\n} from 'src/store/app';\nimport { ClashAPIConfig } from 'src/types';\n\nimport s from './BackendList.module.css';\nimport { connect, useStoreActions } from './StateProvider';\n\ntype Config = ClashAPIConfig & { addedAt: number };\n\nconst mapState = (s) => ({\n  apiConfigs: getClashAPIConfigs(s),\n  selectedClashAPIConfigIndex: getSelectedClashAPIConfigIndex(s),\n});\n\nexport const BackendList = connect(mapState)(BackendListImpl);\n\nfunction BackendListImpl({\n  apiConfigs,\n  selectedClashAPIConfigIndex,\n}: {\n  apiConfigs: Config[];\n  selectedClashAPIConfigIndex: number;\n}) {\n  const {\n    app: { removeClashAPIConfig, selectClashAPIConfig },\n  } = useStoreActions();\n\n  const onRemove = React.useCallback(\n    (conf: ClashAPIConfig) => {\n      removeClashAPIConfig(conf);\n    },\n    [removeClashAPIConfig]\n  );\n  const onSelect = React.useCallback(\n    (conf: ClashAPIConfig) => {\n      selectClashAPIConfig(conf);\n    },\n    [selectClashAPIConfig]\n  );\n\n  return (\n    <>\n      <ul className={s.ul}>\n        {apiConfigs.map((item, idx) => {\n          return (\n            <li\n              className={cx(s.li, {\n                [s.hasSecret]: item.secret,\n                [s.isSelected]: idx === selectedClashAPIConfigIndex,\n              })}\n              key={item.baseURL + item.secret}\n            >\n              <Item\n                disableRemove={idx === selectedClashAPIConfigIndex}\n                baseURL={item.baseURL}\n                secret={item.secret}\n                onRemove={onRemove}\n                onSelect={onSelect}\n              />\n            </li>\n          );\n        })}\n      </ul>\n    </>\n  );\n}\n\nfunction Item({\n  baseURL,\n  secret,\n  disableRemove,\n  onRemove,\n  onSelect,\n}: {\n  baseURL: string;\n  secret: string;\n  disableRemove: boolean;\n  onRemove: (x: ClashAPIConfig) => void;\n  onSelect: (x: ClashAPIConfig) => void;\n}) {\n  const [show, toggle] = useToggle();\n  const Icon = show ? EyeOff : Eye;\n\n  const handleTap = React.useCallback((e: React.KeyboardEvent) => {\n    e.stopPropagation();\n  }, []);\n\n  return (\n    <>\n      <Button\n        disabled={disableRemove}\n        onClick={() => onRemove({ baseURL, secret })}\n        className={s.close}\n      >\n        <Close size={20} />\n      </Button>\n      <span\n        className={s.url}\n        tabIndex={0}\n        role=\"button\"\n        onClick={() => onSelect({ baseURL, secret })}\n        onKeyUp={handleTap}\n      >\n        {baseURL}\n      </span>\n      <span />\n      {secret ? (\n        <>\n          <span className={s.secret}>{show ? secret : '***'}</span>\n\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean | (() => void)' is not assignable to... Remove this comment to see the full error message */}\n          <Button onClick={toggle} className={s.eye}>\n            <Icon size={20} />\n          </Button>\n        </>\n      ) : null}\n    </>\n  );\n}\n\nfunction Button({\n  children,\n  onClick,\n  className,\n  disabled,\n}: {\n  children: React.ReactNode;\n\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => unknown;\n  className: string;\n  disabled?: boolean;\n}) {\n  return (\n    <button\n      disabled={disabled}\n      className={cx(className, s.btn)}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2-70itbuF1\",\"header\":\"JKE-0c5hxF\",\"icon\":\"o2VhY_cs6Z\",\"body\":\"_3QDGxJ_pWs\",\"hostnamePort\":\"tTZzzcEsTA\",\"error\":\"_2cCgtjpQZP\",\"footer\":\"_3OT00Mqmrw\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2uN43zExEi\",\"floatAbove\":\"_2gQ0j5OHC8\"};","import cx from 'clsx';\nimport React from 'react';\n\nimport s from './Field.module.css';\n\nconst { useCallback } = React;\n\ntype Props = {\n  value?: string | number;\n  type?: 'text' | 'number';\n  onChange?: (...args: any[]) => any;\n  id?: string;\n  label?: string;\n};\n\nexport default function Field({ id, label, value, onChange, ...props }: Props) {\n  const valueOnChange = useCallback((e) => onChange(e), [onChange]);\n  const labelClassName = cx({\n    [s.floatAbove]: typeof value === 'string' && value !== '',\n  });\n  return (\n    <div className={s.root}>\n      <input id={id} value={value} onChange={valueOnChange} {...props} />\n      <label htmlFor={id} className={labelClassName}>\n        {label}\n      </label>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { fetchConfigs } from 'src/api/configs';\nimport { BackendList } from 'src/components/BackendList';\nimport { ClashAPIConfig } from 'src/types';\n\nimport { addClashAPIConfig, getClashAPIConfig } from '../store/app';\nimport s0 from './APIConfig.module.css';\nimport Button from './Button';\nimport Field from './Field';\nimport { connect } from './StateProvider';\nimport SvgYacd from './SvgYacd';\n\nconst { useState, useRef, useCallback } = React;\nconst Ok = 0;\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n});\n\nfunction APIConfig({ dispatch }) {\n  const [baseURL, setBaseURL] = useState('');\n  const [secret, setSecret] = useState('');\n  const [errMsg, setErrMsg] = useState('');\n\n  const userTouchedFlagRef = useRef(false);\n  const contentEl = useRef(null);\n\n  const handleInputOnChange = useCallback((e) => {\n    userTouchedFlagRef.current = true;\n    setErrMsg('');\n    const target = e.target;\n    const { name } = target;\n    const value = target.value;\n    switch (name) {\n      case 'baseURL':\n        setBaseURL(value);\n        break;\n      case 'secret':\n        setSecret(value);\n        break;\n      default:\n        throw new Error(`unknown input name ${name}`);\n    }\n  }, []);\n\n  const onConfirm = useCallback(() => {\n    verify({ baseURL, secret }).then((ret) => {\n      if (ret[0] !== Ok) {\n        setErrMsg(ret[1]);\n      } else {\n        dispatch(addClashAPIConfig({ baseURL, secret }));\n      }\n    });\n  }, [baseURL, secret, dispatch]);\n\n  const handleContentOnKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (\n        e.target instanceof Element &&\n        (!e.target.tagName || e.target.tagName.toUpperCase() !== 'INPUT')\n      ) {\n        return;\n      }\n      if (e.key !== 'Enter') return;\n\n      onConfirm();\n    },\n    [onConfirm]\n  );\n\n  return (\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    <div className={s0.root} ref={contentEl} onKeyDown={handleContentOnKeyDown}>\n      <div className={s0.header}>\n        <div className={s0.icon}>\n          <SvgYacd width={160} height={160} />\n        </div>\n      </div>\n      <div className={s0.body}>\n        <div className={s0.hostnamePort}>\n          <Field\n            id=\"baseURL\"\n            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ id: string; name: string; label: string; t... Remove this comment to see the full error message\n            name=\"baseURL\"\n            label=\"API Base URL\"\n            type=\"text\"\n            value={baseURL}\n            onChange={handleInputOnChange}\n          />\n          <Field\n            id=\"secret\"\n            // @ts-expect-error ts-migrate(2322) FIXME: Type '{ id: string; name: string; label: string; v... Remove this comment to see the full error message\n            name=\"secret\"\n            label=\"Secret(optional)\"\n            value={secret}\n            type=\"text\"\n            onChange={handleInputOnChange}\n          />\n        </div>\n      </div>\n      <div className={s0.error}>{errMsg ? errMsg : null}</div>\n      <div className={s0.footer}>\n        <Button label=\"Add\" onClick={onConfirm} />\n      </div>\n      <div style={{ height: 20 }} />\n      <BackendList />\n    </div>\n  );\n}\n\nexport default connect(mapState)(APIConfig);\n\nasync function verify(apiConfig: ClashAPIConfig): Promise<[number, string?]> {\n  try {\n    new URL(apiConfig.baseURL);\n  } catch (e) {\n    if (apiConfig.baseURL) {\n      const prefix = apiConfig.baseURL.substring(0, 7);\n      if (prefix !== 'http://' && prefix !== 'https:/') {\n        return [1, 'Must starts with http:// or https://'];\n      }\n    }\n\n    return [1, 'Invalid URL'];\n  }\n  try {\n    const res = await fetchConfigs(apiConfig);\n    if (res.status > 399) {\n      return [1, res.statusText];\n    }\n    return [Ok];\n  } catch (e) {\n    return [1, 'Failed to connect'];\n  }\n}\n","export const DOES_NOT_SUPPORT_FETCH = 0;\n\nexport const errors = {\n  [DOES_NOT_SUPPORT_FETCH]: {\n    message: 'Browser not supported!',\n    detail: 'This browser does not support \"fetch\", please choose another one.',\n  },\n  default: {\n    message: 'Oops, something went wrong!',\n  },\n};\n\nexport type Err = { code: number };\n\nexport function deriveMessageFromError(err: Err) {\n  const { code } = err;\n  if (typeof code === 'number') {\n    return errors[code];\n  }\n  return errors.default;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_2vs8ks4GvR\",\"container\":\"Z8vSJz0PbL\",\"overlay\":\"EWfRQXOK8M\"};","import cx from 'clsx';\nimport React from 'react';\nimport Modal from 'react-modal';\n\nimport s0 from './Modal.module.css';\n\ntype Props = {\n  isOpen: boolean;\n  onRequestClose: (...args: any[]) => any;\n  children: React.ReactNode;\n  className?: string;\n  overlayClassName?: string;\n};\n\nfunction ModalAPIConfig({\n  isOpen,\n  onRequestClose,\n  className,\n  overlayClassName,\n  children,\n  ...otherProps\n}: Props) {\n  const contentCls = cx(className, s0.content);\n  const overlayCls = cx(overlayClassName, s0.overlay);\n  return (\n    <Modal\n      isOpen={isOpen}\n      onRequestClose={onRequestClose}\n      className={contentCls}\n      overlayClassName={overlayCls}\n      {...otherProps}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nexport default React.memo(ModalAPIConfig);\n","import React from 'react';\n\nimport { DOES_NOT_SUPPORT_FETCH, errors } from '../misc/errors';\nimport { getClashAPIConfig } from '../store/app';\nimport { fetchConfigs } from '../store/configs';\nimport { closeModal } from '../store/modals';\nimport APIConfig from './APIConfig';\nimport s0 from './APIDiscovery.module.css';\nimport Modal from './Modal';\nimport { connect } from './StateProvider';\n\nconst { useCallback, useEffect } = React;\n\nfunction APIDiscovery({ dispatch, apiConfig, modals }) {\n  if (!window.fetch) {\n    const { detail } = errors[DOES_NOT_SUPPORT_FETCH];\n    const err = new Error(detail);\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'code' does not exist on type 'Error'.\n    err.code = DOES_NOT_SUPPORT_FETCH;\n    throw err;\n  }\n\n  const closeApiConfigModal = useCallback(() => {\n    dispatch(closeModal('apiConfig'));\n  }, [dispatch]);\n  useEffect(() => {\n    dispatch(fetchConfigs(apiConfig));\n  }, [dispatch, apiConfig]);\n\n  return (\n    <Modal\n      isOpen={modals.apiConfig}\n      className={s0.content}\n      overlayClassName={s0.overlay}\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element; isOpen: any; className:... Remove this comment to see the full error message\n      shouldCloseOnOverlayClick={false}\n      shouldCloseOnEsc={false}\n      onRequestClose={closeApiConfigModal}\n    >\n      <div className={s0.container}>\n        <APIConfig />\n      </div>\n    </Modal>\n  );\n}\n\nconst mapState = (s) => ({\n  modals: s.modals,\n  apiConfig: getClashAPIConfig(s),\n});\n\nexport default connect(mapState)(APIDiscovery);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_113JVByWGF\",\"yacd\":\"_1m2ZsnzFvt\",\"link\":\"_3TKFOM4Tgj\"};","import React from 'react';\n\ntype Props = {\n  width?: number;\n  height?: number;\n};\n\nexport default function SvgGithub({ width = 24, height = 24 }: Props = {}) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={width}\n      height={height}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22\" />\n    </svg>\n  );\n}\n","import React from 'react';\n\nimport s0 from './ErrorBoundaryFallback.module.css';\nimport SvgGithub from './SvgGithub';\nimport SvgYacd from './SvgYacd';\nconst yacdRepoIssueUrl = 'https://github.com/haishanh/yacd/issues';\n\ntype Props = {\n  message?: string;\n  detail?: string;\n};\n\nfunction ErrorBoundaryFallback({ message, detail }: Props) {\n  return (\n    <div className={s0.root}>\n      <div className={s0.yacd}>\n        <SvgYacd width={150} height={150} />\n      </div>\n      {message ? <h1>{message}</h1> : null}\n      {detail ? <p>{detail}</p> : null}\n      <p>\n        <a className={s0.link} href={yacdRepoIssueUrl}>\n          <SvgGithub width={16} height={16} />\n          haishanh/yacd\n        </a>\n      </p>\n    </div>\n  );\n}\n\nexport default ErrorBoundaryFallback;\n","import * as React from 'react';\n\n// import { getSentry } from '../misc/sentry';\nimport { deriveMessageFromError, Err } from '../misc/errors';\nimport ErrorBoundaryFallback from './ErrorBoundaryFallback';\n\ntype Props = {\n  children: React.ReactNode;\n};\n\ntype State = {\n  error?: Err;\n};\n\nclass ErrorBoundary extends React.Component<Props, State> {\n  state = { error: null };\n\n  static getDerivedStateFromError(error: Err) {\n    return { error };\n  }\n\n  render() {\n    if (this.state.error) {\n      const { message, detail } = deriveMessageFromError(this.state.error);\n      return <ErrorBoundaryFallback message={message} detail={detail} />;\n    } else {\n      return this.props.children;\n    }\n  }\n}\n\nexport default ErrorBoundary;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2kr0S-YLqE\"};","// extracted by mini-css-extract-plugin\nexport default {\"loading\":\"_12V5kDiPEH\",\"pulse\":\"_2FcudZSVil\",\"pulseScaleOut\":\"_3gvFm3l86P\"};","import React from 'react';\n\nimport s0 from './Loading.module.css';\n\ntype Props = {\n  height?: string;\n};\n\nconst Loading = ({ height }: Props) => {\n  const style = height ? { height } : {};\n  return (\n    <div className={s0.loading} style={style}>\n      <div className={s0.pulse} />\n    </div>\n  );\n};\n\nexport default Loading;\n","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { fetchData } from '../api/traffic';\nimport useLineChart from '../hooks/useLineChart';\nimport {\n  chartJSResource,\n  chartStyles,\n  commonDataSetProps,\n} from '../misc/chart';\nimport { getClashAPIConfig, getSelectedChartStyleIndex } from '../store/app';\nimport { connect } from './StateProvider';\n\nconst { useMemo } = React;\n\nconst chartWrapperStyle = {\n  // make chartjs chart responsive\n  position: 'relative',\n  maxWidth: 1000,\n};\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n  selectedChartStyleIndex: getSelectedChartStyleIndex(s),\n});\n\nexport default connect(mapState)(TrafficChart);\n\nfunction TrafficChart({ apiConfig, selectedChartStyleIndex }) {\n  const Chart = chartJSResource.read();\n  const traffic = fetchData(apiConfig);\n  const { t } = useTranslation();\n  const data = useMemo(\n    () => ({\n      labels: traffic.labels,\n      datasets: [\n        {\n          ...commonDataSetProps,\n          ...chartStyles[selectedChartStyleIndex].up,\n          label: t('Up'),\n          data: traffic.up,\n        },\n        {\n          ...commonDataSetProps,\n          ...chartStyles[selectedChartStyleIndex].down,\n          label: t('Down'),\n          data: traffic.down,\n        },\n      ],\n    }),\n    [traffic, selectedChartStyleIndex, t]\n  );\n\n  useLineChart(Chart, 'trafficChart', data, traffic);\n\n  return (\n    // @ts-expect-error ts-migrate(2322) FIXME: Type '{ position: string; maxWidth: number; }' is ... Remove this comment to see the full error message\n    <div style={chartWrapperStyle}>\n      <canvas id=\"trafficChart\" />\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"TrafficNow\":\"_2n4kL7wLDR\"};","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport * as connAPI from '../api/connections';\nimport { fetchData } from '../api/traffic';\nimport prettyBytes from '../misc/pretty-bytes';\nimport { getClashAPIConfig } from '../store/app';\nimport { connect } from './StateProvider';\nimport s0 from './TrafficNow.module.css';\n\nconst { useState, useEffect, useCallback } = React;\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n});\nexport default connect(mapState)(TrafficNow);\n\nfunction TrafficNow({ apiConfig }) {\n  const { t } = useTranslation();\n  const { upStr, downStr } = useSpeed(apiConfig);\n  const { upTotal, dlTotal, connNumber } = useConnection(apiConfig);\n  return (\n    <div className={s0.TrafficNow}>\n      <div className=\"sec\">\n        <div>{t('Upload')}</div>\n        <div>{upStr}</div>\n      </div>\n      <div className=\"sec\">\n        <div>{t('Download')}</div>\n        <div>{downStr}</div>\n      </div>\n      <div className=\"sec\">\n        <div>{t('Upload Total')}</div>\n        <div>{upTotal}</div>\n      </div>\n      <div className=\"sec\">\n        <div>{t('Download Total')}</div>\n        <div>{dlTotal}</div>\n      </div>\n      <div className=\"sec\">\n        <div>{t('Active Connections')}</div>\n        <div>{connNumber}</div>\n      </div>\n    </div>\n  );\n}\n\nfunction useSpeed(apiConfig) {\n  const [speed, setSpeed] = useState({ upStr: '0 B/s', downStr: '0 B/s' });\n  useEffect(() => {\n    return fetchData(apiConfig).subscribe((o) =>\n      setSpeed({\n        upStr: prettyBytes(o.up) + '/s',\n        downStr: prettyBytes(o.down) + '/s',\n      })\n    );\n  }, [apiConfig]);\n  return speed;\n}\n\nfunction useConnection(apiConfig) {\n  const [state, setState] = useState({\n    upTotal: '0 B',\n    dlTotal: '0 B',\n    connNumber: 0,\n  });\n  const read = useCallback(\n    ({ downloadTotal, uploadTotal, connections }) => {\n      setState({\n        upTotal: prettyBytes(uploadTotal),\n        dlTotal: prettyBytes(downloadTotal),\n        connNumber: connections.length,\n      });\n    },\n    [setState]\n  );\n  useEffect(() => {\n    return connAPI.fetchData(apiConfig, read);\n  }, [apiConfig, read]);\n  return state;\n}\n","import React, { Suspense } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport ContentHeader from './ContentHeader';\nimport s0 from './Home.module.css';\nimport Loading from './Loading';\nimport TrafficChart from './TrafficChart';\nimport TrafficNow from './TrafficNow';\n\nexport default function Home() {\n  const { t } = useTranslation();\n  return (\n    <div>\n      <ContentHeader title={t('Overview')} />\n      <div className={s0.root}>\n        <div>\n          <TrafficNow />\n        </div>\n        <div className={s0.chart}>\n          <Suspense fallback={<Loading height=\"200px\" />}>\n            <TrafficChart />\n          </Suspense>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"lo\":\"_2fg1R7Zu62\"};","import React from 'react';\n\nimport s0 from './Loading2.module.css';\nimport SvgYacd from './SvgYacd';\n\nfunction Loading() {\n  return (\n    <div className={s0.lo}>\n      <SvgYacd width={280} height={280} animate c0=\"transparent\" c1=\"#646464\" />\n    </div>\n  );\n}\n\nexport default Loading;\n","// extracted by mini-css-extract-plugin\nexport default {\"app\":\"_1X99PPGcn7\",\"content\":\"_2oV8uPP0dj\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3sTuXodYya\",\"logoPlaceholder\":\"_1WdrygzFVZ\",\"rows\":\"q9nBJwAvlz\",\"row\":\"_3yqSXpep4D\",\"rowActive\":\"_3wqPc_btNi\",\"label\":\"_2sd59kze-t\",\"footer\":\"_2o6aUGu--S\",\"iconWrapper\":\"_11NITPe4W7\",\"themeSwitchContainer\":\"_1kzEILbWHq\"};","import Tooltip from '@reach/tooltip';\nimport cx from 'clsx';\nimport * as React from 'react';\nimport { Info } from 'react-feather';\nimport { useTranslation } from 'react-i18next';\nimport {\n  FcAreaChart,\n  FcDocument,\n  FcGlobe,\n  FcLink,\n  FcRuler,\n  FcSettings,\n} from 'react-icons/fc';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { framerMotionResouce } from '../misc/motion';\nimport { getTheme, switchTheme } from '../store/app';\nimport s from './SideBar.module.css';\nimport { connect } from './StateProvider';\n\nconst { useCallback } = React;\n\nconst icons = {\n  activity: FcAreaChart,\n  globe: FcGlobe,\n  command: FcRuler,\n  file: FcDocument,\n  settings: FcSettings,\n  link: FcLink,\n};\n\nconst SideBarRow = React.memo(function SideBarRow({\n  isActive,\n  to,\n  iconId,\n  labelText,\n}: SideBarRowProps) {\n  const Comp = icons[iconId];\n  const className = cx(s.row, isActive ? s.rowActive : null);\n  return (\n    <Link to={to} className={className}>\n      <Comp />\n      <div className={s.label}>{labelText}</div>\n    </Link>\n  );\n});\n\ninterface SideBarRowProps {\n  isActive: boolean;\n  to: string;\n  iconId?: string;\n  labelText?: string;\n}\n\nconst pages = [\n  {\n    to: '/',\n    iconId: 'activity',\n    labelText: 'Overview',\n  },\n  {\n    to: '/proxies',\n    iconId: 'globe',\n    labelText: 'Proxies',\n  },\n  {\n    to: '/rules',\n    iconId: 'command',\n    labelText: 'Rules',\n  },\n  {\n    to: '/connections',\n    iconId: 'link',\n    labelText: 'Conns',\n  },\n  {\n    to: '/configs',\n    iconId: 'settings',\n    labelText: 'Config',\n  },\n  {\n    to: '/logs',\n    iconId: 'file',\n    labelText: 'Logs',\n  },\n];\n\nfunction SideBar({ dispatch, theme }) {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const switchThemeHooked = useCallback(() => {\n    dispatch(switchTheme());\n  }, [dispatch]);\n  return (\n    <div className={s.root}>\n      <div className={s.logoPlaceholder} />\n      <div className={s.rows}>\n        {pages.map(({ to, iconId, labelText }) => (\n          <SideBarRow\n            key={to}\n            to={to}\n            isActive={location.pathname === to}\n            iconId={iconId}\n            labelText={t(labelText)}\n          />\n        ))}\n      </div>\n      <div className={s.footer}>\n        <Tooltip\n          label={t('theme')}\n          aria-label={\n            'switch to ' + (theme === 'light' ? 'dark' : 'light') + ' theme'\n          }\n        >\n          <button\n            className={cx(s.iconWrapper, s.themeSwitchContainer)}\n            onClick={switchThemeHooked}\n          >\n            {theme === 'light' ? <MoonA /> : <Sun />}\n          </button>\n        </Tooltip>\n        <Tooltip label={t('about')}>\n          <Link to=\"/about\" className={s.iconWrapper}>\n            <Info size={20} />\n          </Link>\n        </Tooltip>\n      </div>\n    </div>\n  );\n}\n\nfunction MoonA() {\n  const module = framerMotionResouce.read();\n  const motion = module.motion;\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <motion.path\n        d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"\n        initial={{ rotate: -30 }}\n        animate={{ rotate: 0 }}\n        transition={{ duration: 0.7 }}\n      />\n    </svg>\n  );\n}\n\nfunction Sun() {\n  const module = framerMotionResouce.read();\n  const motion = module.motion;\n\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <circle cx=\"12\" cy=\"12\" r=\"5\"></circle>\n      <motion.g\n        initial={{ scale: 0.8 }}\n        animate={{ scale: 1 }}\n        transition={{ duration: 0.7 }}\n      >\n        <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line>\n        <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line>\n        <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line>\n        <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line>\n        <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line>\n        <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\n        <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line>\n        <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line>\n      </motion.g>\n    </svg>\n  );\n}\n\nconst mapState = (s) => ({ theme: getTheme(s) });\nexport default connect(mapState)(SideBar);\n","import React, { PureComponent } from 'react';\nimport { Zap } from 'react-feather';\n\nimport Button from './Button';\nimport Input from './Input';\nimport { LoadingDot } from './shared/Basic';\nimport SwitchThemed from './SwitchThemed';\nimport ToggleSwitch from './ToggleSwitch';\n\nconst noop = () => {\n  /* empty */\n};\n\nconst paneStyle = {\n  padding: '20px 0',\n};\n\nconst optionsRule = [\n  {\n    label: 'Global',\n    value: 'Global',\n  },\n  {\n    label: 'Rule',\n    value: 'Rule',\n  },\n  {\n    label: 'Direct',\n    value: 'Direct',\n  },\n];\n\nconst Pane = ({ children, style }) => (\n  <div style={{ ...paneStyle, ...style }}>{children}</div>\n);\n\nfunction useToggle(initialState = false) {\n  const [onoff, setonoff] = React.useState(initialState);\n  const handleChange = React.useCallback(() => {\n    setonoff((x) => !x);\n  }, []);\n  return [onoff, handleChange];\n}\n\nfunction SwitchExample() {\n  const [checked, handleChange] = useToggle(false);\n  return <SwitchThemed checked={checked} onChange={handleChange} />;\n}\n\nclass StyleGuide extends PureComponent {\n  render() {\n    return (\n      <div>\n        {/* @ts-expect-error ts-migrate(2741) FIXME: Property 'style' is missing in type '{ children: E... Remove this comment to see the full error message */}\n        <Pane>\n          <SwitchExample />\n        </Pane>\n        {/* @ts-expect-error ts-migrate(2741) FIXME: Property 'style' is missing in type '{ children: E... Remove this comment to see the full error message */}\n        <Pane>\n          <Input />\n        </Pane>\n        {/* @ts-expect-error ts-migrate(2741) FIXME: Property 'style' is missing in type '{ children: E... Remove this comment to see the full error message */}\n        <Pane>\n          <ToggleSwitch\n            name=\"test\"\n            options={optionsRule}\n            value=\"Rule\"\n            onChange={noop}\n          />\n        </Pane>\n        {/* @ts-expect-error ts-migrate(2741) FIXME: Property 'style' is missing in type '{ children: E... Remove this comment to see the full error message */}\n        <Pane>\n          <Button text=\"Test Lxatency\" start={<Zap size={16} />} />\n          <Button text=\"Test Lxatency\" start={<Zap size={16} />} isLoading />\n          <Button label=\"Test Lxatency\" />\n          <Button label=\"Button Plain\" kind=\"minimal\" />\n        </Pane>\n        <Pane style={{ paddingLeft: 20 }}>\n          <LoadingDot />\n        </Pane>\n      </div>\n    );\n  }\n}\n\nexport default StyleGuide;\n","import './Root.css';\n\nimport React, { lazy, Suspense } from 'react';\nimport { QueryClientProvider } from 'react-query';\nimport { PartialRouteObject } from 'react-router';\nimport { HashRouter as Router, useRoutes } from 'react-router-dom';\nimport { RecoilRoot } from 'recoil';\nimport { About } from 'src/components/about/About';\nimport { Head } from 'src/components/shared/Head';\nimport { queryClient } from 'src/misc/query';\n\nimport { actions, initialState } from '../store';\nimport APIConfig from './APIConfig';\nimport APIDiscovery from './APIDiscovery';\nimport ErrorBoundary from './ErrorBoundary';\nimport Home from './Home';\nimport Loading2 from './Loading2';\nimport s0 from './Root.module.css';\nimport SideBar from './SideBar';\nimport StateProvider from './StateProvider';\nimport StyleGuide from './StyleGuide';\n\nconst Connections = lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"conns\" */\n      /* webpackPrefetch: true */\n      './Connections'\n    )\n);\nconst Config = lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"config\" */\n      /* webpackPrefetch: true */\n      './Config'\n    )\n);\nconst Logs = lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"logs\" */\n      /* webpackPrefetch: true */\n      './Logs'\n    )\n);\nconst Proxies = lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"proxies\" */\n      /* webpackPrefetch: true */\n      './proxies/Proxies'\n    )\n);\nconst Rules = lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"rules\" */\n      /* webpackPrefetch: true */\n      './Rules'\n    )\n);\n\nconst routes = [\n  { path: '/', element: <Home /> },\n  { path: '/connections', element: <Connections /> },\n  { path: '/configs', element: <Config /> },\n  { path: '/logs', element: <Logs /> },\n  { path: '/proxies', element: <Proxies /> },\n  { path: '/rules', element: <Rules /> },\n  { path: '/about', element: <About /> },\n  __DEV__ ? { path: '/style', element: <StyleGuide /> } : false,\n].filter(Boolean) as PartialRouteObject[];\n\nfunction RouteInnerApp() {\n  return useRoutes(routes);\n}\n\nfunction SideBarApp() {\n  return (\n    <>\n      <APIDiscovery />\n      <SideBar />\n      <div className={s0.content}>\n        <Suspense fallback={<Loading2 />}>\n          <RouteInnerApp />\n        </Suspense>\n      </div>\n    </>\n  );\n}\n\nfunction App() {\n  return useRoutes([\n    { path: '/backend', element: <APIConfig /> },\n    { path: '*', element: <SideBarApp /> },\n  ]);\n}\n\nconst Root = () => (\n  <ErrorBoundary>\n    <RecoilRoot>\n      <StateProvider initialState={initialState} actions={actions}>\n        <QueryClientProvider client={queryClient}>\n          <Router>\n            <div className={s0.app}>\n              <Head />\n              <Suspense fallback={<Loading2 />}>\n                <App />\n              </Suspense>\n            </div>\n          </Router>\n        </QueryClientProvider>\n      </StateProvider>\n    </RecoilRoot>\n  </ErrorBoundary>\n);\n\nexport default Root;\n","const isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/sw.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service worker'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import 'modern-normalize/modern-normalize.css';\nimport './misc/i18n';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\n\nimport Root from './components/Root';\nimport * as swRegistration from './swRegistration';\n\nconst rootEl = document.getElementById('app');\n\nModal.setAppElement(rootEl);\n\nconst root = ReactDOM.unstable_createRoot(rootEl);\nroot.render(<Root />);\n\nswRegistration.register();\n\n// eslint-disable-next-line no-console\nconsole.log('Checkout the repo: https://github.com/haishanh/yacd');\n// eslint-disable-next-line\nconsole.log('Version:', __VERSION__);\n","// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"_796AqwOFs_\",\"minimal\":\"_1bLZvI40oA\",\"btnStart\":\"_1SrCTG7yDt\",\"loadingContainer\":\"_39VuJRXAmL\"};","import cx from 'clsx';\nimport * as React from 'react';\n\nimport s0 from './Button.module.css';\nimport { LoadingDot } from './shared/Basic';\n\nconst { forwardRef, useCallback } = React;\n\ntype ButtonInternalProps = {\n  children?: React.ReactNode;\n  label?: string;\n  text?: string;\n  start?: React.ReactElement | (() => React.ReactElement);\n};\n\ntype ButtonProps = {\n  isLoading?: boolean;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => unknown;\n  disabled?: boolean;\n  kind?: 'primary' | 'minimal';\n  className?: string;\n  title?: string;\n} & ButtonInternalProps;\n\nfunction Button(props: ButtonProps, ref: React.Ref<HTMLButtonElement>) {\n  const {\n    onClick,\n    disabled = false,\n    isLoading,\n    kind = 'primary',\n    className,\n    children,\n    label,\n    text,\n    start,\n    ...restProps\n  } = props;\n  const internalProps = { children, label, text, start };\n  const internalOnClick = useCallback(\n    (e) => {\n      if (isLoading) return;\n      onClick && onClick(e);\n    },\n    [isLoading, onClick]\n  );\n  const btnClassName = cx(\n    s0.btn,\n    { [s0.minimal]: kind === 'minimal' },\n    className\n  );\n  return (\n    <button\n      className={btnClassName}\n      ref={ref}\n      onClick={internalOnClick}\n      disabled={disabled}\n      {...restProps}\n    >\n      {isLoading ? (\n        <>\n          <span style={{ display: 'inline-flex', opacity: 0 }}>\n            <ButtonInternal {...internalProps} />\n          </span>\n          <span className={s0.loadingContainer}>\n            <LoadingDot />\n          </span>\n        </>\n      ) : (\n        <ButtonInternal {...internalProps} />\n      )}\n    </button>\n  );\n}\n\nfunction ButtonInternal({ children, label, text, start }: ButtonInternalProps) {\n  return (\n    <>\n      {start ? (\n        <span className={s0.btnStart}>\n          {typeof start === 'function' ? start() : start}\n        </span>\n      ) : null}\n      {children || label || text}\n    </>\n  );\n}\n\nexport default forwardRef(Button);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_24ddJm1Q5s\",\"h1\":\"B4QNkMu-0t\"};","import React from 'react';\n\nimport s0 from './ContentHeader.module.css';\n\ntype Props = {\n  title: string;\n};\n\nfunction ContentHeader({ title }: Props) {\n  return (\n    <div className={s0.root}>\n      <h1 className={s0.h1}>{title}</h1>\n    </div>\n  );\n}\n\nexport default React.memo(ContentHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"_2DECxrOsTa\"};","import React from 'react';\n\nimport s0 from './Input.module.css';\n\nconst { useState, useRef, useEffect, useCallback } = React;\n\ntype InputProps = {\n  value?: string | number;\n  type?: string;\n  onChange?: (...args: any[]) => any;\n  name?: string;\n  placeholder?: string;\n};\n\nexport default function Input(props: InputProps) {\n  return <input className={s0.input} {...props} />;\n}\n\nexport function SelfControlledInput({ value, ...restProps }) {\n  const [internalValue, setInternalValue] = useState(value);\n  const refValue = useRef(value);\n  useEffect(() => {\n    if (refValue.current !== value) {\n      // ideally we should only do this when this input is not focused\n      setInternalValue(value);\n    }\n    refValue.current = value;\n  }, [value]);\n  const onChange = useCallback((e) => setInternalValue(e.target.value), [\n    setInternalValue,\n  ]);\n\n  return (\n    <input\n      className={s0.input}\n      value={internalValue}\n      onChange={onChange}\n      {...restProps}\n    />\n  );\n}\n","import produce, * as immer from 'immer';\nimport React from 'react';\n\n// in logs store we update logs in place\n// outside of immer produce\n// this is just workaround\nimmer.setAutoFreeze(false);\n\nconst {\n  createContext,\n  memo,\n  useMemo,\n  useRef,\n  useEffect,\n  useCallback,\n  useContext,\n  useState,\n} = React;\n\nexport { immer };\n\nconst StateContext = createContext(null);\nconst DispatchContext = createContext(null);\nconst ActionsContext = createContext(null);\n\nexport function useStoreState() {\n  return useContext(StateContext);\n}\n\nexport function useStoreDispatch() {\n  return useContext(DispatchContext);\n}\n\nexport function useStoreActions() {\n  return useContext(ActionsContext);\n}\n\n// boundActionCreators\nexport default function Provider({ initialState, actions = {}, children }) {\n  const stateRef = useRef(initialState);\n  const [state, setState] = useState(initialState);\n  const getState = useCallback(() => stateRef.current, []);\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      (window as any).getState2 = getState;\n    }\n  }, [getState]);\n  const dispatch = useCallback(\n    (actionId, fn) => {\n      if (typeof actionId === 'function') return actionId(dispatch, getState);\n\n      const stateNext = produce(getState(), fn);\n      if (stateNext !== stateRef.current) {\n        if (process.env.NODE_ENV === 'development') {\n          // eslint-disable-next-line no-console\n          console.log(actionId, stateNext);\n        }\n        stateRef.current = stateNext;\n        setState(stateNext);\n      }\n    },\n    [getState]\n  );\n  const boundActions = useMemo(() => bindActions(actions, dispatch), [\n    actions,\n    dispatch,\n  ]);\n\n  return (\n    <StateContext.Provider value={state}>\n      <DispatchContext.Provider value={dispatch}>\n        <ActionsContext.Provider value={boundActions}>\n          {children}\n        </ActionsContext.Provider>\n      </DispatchContext.Provider>\n    </StateContext.Provider>\n  );\n}\n\nexport function connect(mapStateToProps) {\n  return (Component) => {\n    const MemoComponent = memo(Component);\n    function Connected(props) {\n      const state = useContext(StateContext);\n      const dispatch = useContext(DispatchContext);\n      const mapped = mapStateToProps(state, props);\n      const nextProps = { dispatch, ...props, ...mapped };\n      return <MemoComponent {...nextProps} />;\n    }\n    return Connected;\n  };\n}\n\n// steal from https://github.com/reduxjs/redux/blob/master/src/bindActionCreators.ts\nfunction bindAction(action, dispatch) {\n  return function (...args) {\n    // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n    return dispatch(action.apply(this, args));\n  };\n}\n\nfunction bindActions(actions, dispatch) {\n  const boundActions = {};\n  for (const key in actions) {\n    const action = actions[key];\n    if (typeof action === 'function') {\n      boundActions[key] = bindAction(action, dispatch);\n    } else if (typeof action === 'object') {\n      boundActions[key] = bindActions(action, dispatch);\n    }\n  }\n  return boundActions;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"path\":\"_3MvgliBN_D\",\"dash\":\"_2C1TpO8LMn\"};","import cx from 'clsx';\nimport React from 'react';\n\nimport s from './SvgYacd.module.css';\n\ntype Props = {\n  width?: number;\n  height?: number;\n  animate?: boolean;\n  c0?: string;\n  c1?: string;\n};\n\nfunction SvgYacd({\n  width = 320,\n  height = 320,\n  animate = false,\n  c0 = 'currentColor',\n  c1 = '#eee',\n}: Props) {\n  const faceClasName = cx({ [s.path]: animate });\n  return (\n    <svg\n      width={width}\n      height={height}\n      viewBox=\"0 0 320 320\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g fill=\"none\" fillRule=\"evenodd\">\n        {/* face */}\n        <path\n          d=\"M71.689 53.055c9.23-1.487 25.684 27.263 41.411 56.663 18.572-8.017 71.708-7.717 93.775 0 4.714-15.612 31.96-57.405 41.626-56.663 3.992.088 13.07 31.705 23.309 94.96 2.743 16.949 7.537 47.492 14.38 91.63-42.339 17.834-84.37 26.751-126.095 26.751-41.724 0-83.756-8.917-126.095-26.751C52.973 116.244 65.536 54.047 71.689 53.055z\"\n          stroke={c1}\n          strokeWidth=\"4\"\n          strokeLinecap=\"round\"\n          fill={c0}\n          className={faceClasName}\n        />\n        <circle fill={c1} cx=\"216.5\" cy=\"181.5\" r=\"14.5\" />\n        <circle fill={c1} cx=\"104.5\" cy=\"181.5\" r=\"14.5\" />\n        {/* mouth */}\n        <g stroke={c1} strokeLinecap=\"round\" strokeWidth=\"4\">\n          <path d=\"M175.568 218.694c-2.494 1.582-5.534 2.207-8.563 1.508-3.029-.7-5.487-2.594-7.035-5.11M143.981 218.694c2.494 1.582 5.534 2.207 8.563 1.508 3.03-.7 5.488-2.594 7.036-5.11\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgYacd;\n","import React from 'react';\nimport Switch from 'react-switch';\n\nimport { getTheme } from '../store/app';\nimport { connect } from './StateProvider';\n\nfunction SwitchThemed({ checked = false, onChange, theme, name }) {\n  const offColor = theme === 'dark' ? '#393939' : '#e9e9e9';\n\n  return (\n    <Switch\n      onChange={onChange}\n      checked={checked}\n      uncheckedIcon={false}\n      checkedIcon={false}\n      offColor={offColor}\n      onColor=\"#047aff\"\n      offHandleColor=\"#fff\"\n      onHandleColor=\"#fff\"\n      handleDiameter={24}\n      height={28}\n      width={44}\n      className=\"rs\"\n      name={name}\n    />\n  );\n}\n\nexport default connect((s) => ({\n  theme: getTheme(s),\n}))(SwitchThemed);\n","// extracted by mini-css-extract-plugin\nexport default {\"ToggleSwitch\":\"_2IgDTE__bQ\",\"slider\":\"_2IfOm9qQ_4\"};","import React, { useCallback, useMemo } from 'react';\n\nimport s0 from './ToggleSwitch.module.css';\n\ntype Props = {\n  options?: any[];\n  value?: string;\n  name?: string;\n  onChange?: (...args: any[]) => any;\n};\n\nfunction ToggleSwitch({ options, value, name, onChange }: Props) {\n  const idxSelected = useMemo(\n    () => options.map((o) => o.value).indexOf(value),\n    [options, value]\n  );\n\n  const getPortionPercentage = useCallback(\n    // @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\n    (idx) => {\n      const w = Math.floor(100 / options.length);\n      if (idx === options.length - 1) {\n        return 100 - options.length * w + w;\n      } else if (idx > -1) {\n        return w;\n      }\n    },\n    [options]\n  );\n\n  const sliderStyle = useMemo(() => {\n    return {\n      width: getPortionPercentage(idxSelected) + '%',\n      left: idxSelected * getPortionPercentage(0) + '%',\n    };\n  }, [idxSelected, getPortionPercentage]);\n\n  return (\n    <div className={s0.ToggleSwitch}>\n      <div className={s0.slider} style={sliderStyle} />\n      {options.map((o, idx) => {\n        const id = `${name}-${o.label}`;\n        const className = idx === 0 ? '' : 'border-left';\n        return (\n          <label\n            htmlFor={id}\n            key={id}\n            className={className}\n            style={{\n              width: getPortionPercentage(idx) + '%',\n            }}\n          >\n            <input\n              id={id}\n              name={name}\n              type=\"radio\"\n              value={o.value}\n              checked={value === o.value}\n              onChange={onChange}\n            />\n            <div>{o.label}</div>\n          </label>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default React.memo(ToggleSwitch);\n","// extracted by mini-css-extract-plugin\nexport default {\"sectionNameType\":\"Q-CsP5Y3FT\",\"loadingDot\":\"_3GL3LmFL_E\",\"dot2\":\"uZWMZR9nBW\",\"dot1\":\"saNygeIhRC\",\"dot3\":\"_3RtxWfV4g4\"};","import React from 'react';\n\nimport s from './Basic.module.css';\n\nexport function SectionNameType({ name, type }) {\n  return (\n    <h2 className={s.sectionNameType}>\n      <span>{name}</span>\n      <span>{type}</span>\n    </h2>\n  );\n}\n\nexport function LoadingDot() {\n  return <span className={s.loadingDot} />;\n}\n","import React from 'react';\n\nimport { commonChartOptions } from '../misc/chart';\n\nconst { useEffect } = React;\nconst options = commonChartOptions;\n\nexport default function useLineChart(\n  Chart,\n  elementId,\n  data,\n  subscription,\n  extraChartOptions = {}\n) {\n  useEffect(() => {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'getContext' does not exist on type 'HTML... Remove this comment to see the full error message\n    const ctx = document.getElementById(elementId).getContext('2d');\n    const c = new Chart(ctx, {\n      type: 'line',\n      data,\n      options: { ...options, ...extraChartOptions },\n    });\n    const unsubscribe =\n      subscription && subscription.subscribe(() => c.update());\n    return () => {\n      unsubscribe && unsubscribe();\n      c.destroy();\n    };\n  }, [Chart, elementId, data, subscription, extraChartOptions]);\n}\n","import { unstable_createResource as createResource } from '@hsjs/react-cache';\n\nimport prettyBytes from './pretty-bytes';\n\nexport const chartJSResource = createResource(() => {\n  return import(\n    /* webpackChunkName: \"chartjs\" */\n    /* webpackPrefetch: true */\n    /* webpackPreload: true */\n    'chart.js/dist/Chart.min.js'\n  ).then((c) => c.default);\n});\n\nexport const commonDataSetProps = {\n  borderWidth: 1,\n  lineTension: 0,\n  pointRadius: 0,\n};\n\nexport const commonChartOptions = {\n  responsive: true,\n  maintainAspectRatio: true,\n  title: {\n    display: false,\n  },\n  legend: {\n    display: true,\n    position: 'top',\n    labels: {\n      fontColor: '#ccc',\n      boxWidth: 20,\n    },\n  },\n  tooltips: {\n    enabled: false,\n    mode: 'index',\n    intersect: false,\n    animationDuration: 100,\n  },\n  hover: {\n    mode: 'nearest',\n    intersect: true,\n  },\n  scales: {\n    xAxes: [\n      {\n        display: false,\n        gridLines: {\n          display: false,\n        },\n      },\n    ],\n    yAxes: [\n      {\n        display: true,\n        gridLines: {\n          display: true,\n          color: '#555',\n          borderDash: [3, 6],\n          drawBorder: false,\n        },\n        ticks: {\n          callback(value) {\n            return prettyBytes(value) + '/s ';\n          },\n        },\n      },\n    ],\n  },\n};\n\nexport const chartStyles = [\n  {\n    down: {\n      backgroundColor: 'rgba(176, 209, 132, 0.8)',\n      borderColor: 'rgb(176, 209, 132)',\n    },\n    up: {\n      backgroundColor: 'rgba(181, 220, 231, 0.8)',\n      borderColor: 'rgb(181, 220, 231)',\n    },\n  },\n  {\n    up: {\n      backgroundColor: 'rgb(98, 190, 100)',\n      borderColor: 'rgb(78,146,79)',\n    },\n    down: {\n      backgroundColor: 'rgb(160, 230, 66)',\n      borderColor: 'rgb(110, 156, 44)',\n    },\n  },\n  {\n    up: {\n      backgroundColor: 'rgba(94, 175, 223, 0.3)',\n      borderColor: 'rgb(94, 175, 223)',\n    },\n    down: {\n      backgroundColor: 'rgba(139, 227, 195, 0.3)',\n      borderColor: 'rgb(139, 227, 195)',\n    },\n  },\n  {\n    up: {\n      backgroundColor: 'rgba(242, 174, 62, 0.3)',\n      borderColor: 'rgb(242, 174, 62)',\n    },\n    down: {\n      backgroundColor: 'rgba(69, 154, 248, 0.3)',\n      borderColor: 'rgb(69, 154, 248)',\n    },\n  },\n];\n\n// TODO to remove\nexport const colorCombo = chartStyles;\n","import { createResource } from './createResource';\n\nexport const framerMotionResouce = createResource(\n  () => import('framer-motion')\n);\n","// from https://gist.github.com/ryanflorence/e10cc9dbc0e259759ec942ba82e5b57c\nexport function createResource(getPromise: (key: string) => Promise<any>) {\n  let cache = {};\n  const inflight = {};\n  const errors = {};\n\n  function load(key = 'default') {\n    inflight[key] = getPromise(key)\n      .then((val) => {\n        delete inflight[key];\n        cache[key] = val;\n      })\n      .catch((error) => {\n        errors[key] = error;\n      });\n    return inflight[key];\n  }\n\n  function preload(key = 'default') {\n    if (cache[key] !== undefined || inflight[key]) return;\n    load(key);\n  }\n\n  function read(key = 'default') {\n    if (cache[key] !== undefined) {\n      return cache[key];\n    } else if (errors[key]) {\n      throw errors[key];\n    } else if (inflight[key]) {\n      throw inflight[key];\n    } else {\n      throw load(key);\n    }\n  }\n\n  function clear(key: 'default') {\n    if (key) {\n      delete cache[key];\n    } else {\n      cache = {};\n    }\n  }\n\n  return { preload, read, clear };\n}\n","// steal from https://github.com/sindresorhus/pretty-bytes/blob/master/index.js\n\nconst UNITS = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\nexport default function prettyBytes(n: number) {\n  if (n < 1000) {\n    return n + ' B';\n  }\n  const exponent = Math.min(Math.floor(Math.log10(n) / 3), UNITS.length - 1);\n  n = Number((n / Math.pow(1000, exponent)).toPrecision(3));\n  const unit = UNITS[exponent];\n  return n + ' ' + unit;\n}\n","import { trimTrailingSlash } from 'src/misc/utils';\nimport { ClashAPIConfig } from 'src/types';\n\nconst headersCommon = { 'Content-Type': 'application/json' };\n\nfunction genCommonHeaders({ secret }: { secret?: string }) {\n  const h = { ...headersCommon };\n  if (secret) {\n    h['Authorization'] = `Bearer ${secret}`;\n  }\n  return h;\n}\n\nexport function getURLAndInit({ baseURL, secret }: ClashAPIConfig) {\n  const headers = genCommonHeaders({ secret });\n  return {\n    url: baseURL,\n    init: { headers },\n  };\n}\n\nexport function buildWebSocketURL(apiConfig: ClashAPIConfig, endpoint: string) {\n  const { baseURL, secret } = apiConfig;\n  let qs = '';\n  if (typeof secret === 'string' && secret !== '') {\n    qs += '?token=' + encodeURIComponent(secret);\n  }\n  const url = new URL(baseURL);\n  url.protocol === 'https:' ? (url.protocol = 'wss:') : (url.protocol = 'ws:');\n  return `${trimTrailingSlash(url.href)}${endpoint}${qs}`;\n}\n","export function throttle<T extends any[]>(\n  fn: (...args: T) => unknown,\n  timeout: number\n) {\n  let pending = false;\n\n  return (...args: T) => {\n    if (!pending) {\n      pending = true;\n      fn(...args);\n      setTimeout(() => {\n        pending = false;\n      }, timeout);\n    }\n  };\n}\n\nexport function debounce<T extends any[]>(\n  fn: (...args: T) => unknown,\n  timeout: number\n) {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return (...args: T) => {\n    if (timeoutId) clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      fn(...args);\n    }, timeout);\n  };\n}\n\nexport function trimTrailingSlash(s: string) {\n  return s.replace(/\\/$/, '');\n}\n","// manage localStorage\n\nconst StorageKey = 'yacd.haishan.me';\n\nfunction loadState() {\n  try {\n    const serialized = localStorage.getItem(StorageKey);\n    if (!serialized) return undefined;\n    return JSON.parse(serialized);\n  } catch (err) {\n    return undefined;\n  }\n}\n\nfunction saveState(state) {\n  try {\n    const serialized = JSON.stringify(state);\n    localStorage.setItem(StorageKey, serialized);\n  } catch (err) {\n    // ignore\n  }\n}\n\nfunction clearState() {\n  try {\n    localStorage.removeItem(StorageKey);\n  } catch (err) {\n    // ignore\n  }\n}\n\nexport { loadState, saveState, clearState };\n","import { DispatchFn, GetStateFn, State, StateApp } from 'src/store/types';\n\nimport { loadState, saveState } from '../misc/storage';\nimport { debounce, trimTrailingSlash } from '../misc/utils';\nimport { fetchConfigs } from './configs';\nimport { closeModal } from './modals';\n\nexport const getClashAPIConfig = (s: State) => {\n  const idx = s.app.selectedClashAPIConfigIndex;\n  return s.app.clashAPIConfigs[idx];\n};\nexport const getSelectedClashAPIConfigIndex = (s: State) =>\n  s.app.selectedClashAPIConfigIndex;\nexport const getClashAPIConfigs = (s: State) => s.app.clashAPIConfigs;\nexport const getTheme = (s: State) => s.app.theme;\nexport const getSelectedChartStyleIndex = (s: State) =>\n  s.app.selectedChartStyleIndex;\nexport const getLatencyTestUrl = (s: State) => s.app.latencyTestUrl;\nexport const getCollapsibleIsOpen = (s: State) => s.app.collapsibleIsOpen;\nexport const getProxySortBy = (s: State) => s.app.proxySortBy;\nexport const getHideUnavailableProxies = (s: State) =>\n  s.app.hideUnavailableProxies;\nexport const getAutoCloseOldConns = (s: State) => s.app.autoCloseOldConns;\n\nconst saveStateDebounced = debounce(saveState, 600);\n\n// @ts-expect-error ts-migrate(7030) FIXME: Not all code paths return a value.\nfunction findClashAPIConfigIndex(getState: GetStateFn, { baseURL, secret }) {\n  const arr = getClashAPIConfigs(getState());\n  for (let i = 0; i < arr.length; i++) {\n    const x = arr[i];\n    if (x.baseURL === baseURL && x.secret === secret) return i;\n  }\n}\n\nexport function addClashAPIConfig({ baseURL, secret }) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    const idx = findClashAPIConfigIndex(getState, { baseURL, secret });\n    // already exists\n    if (idx) return;\n\n    const clashAPIConfig = { baseURL, secret, addedAt: Date.now() };\n    dispatch('addClashAPIConfig', (s) => {\n      s.app.clashAPIConfigs.push(clashAPIConfig);\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function removeClashAPIConfig({ baseURL, secret }) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    const idx = findClashAPIConfigIndex(getState, { baseURL, secret });\n    dispatch('removeClashAPIConfig', (s) => {\n      s.app.clashAPIConfigs.splice(idx, 1);\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function selectClashAPIConfig({ baseURL, secret }) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    const idx = findClashAPIConfigIndex(getState, { baseURL, secret });\n    const curr = getSelectedClashAPIConfigIndex(getState());\n    if (curr !== idx) {\n      dispatch('selectClashAPIConfig', (s) => {\n        s.app.selectedClashAPIConfigIndex = idx;\n      });\n    }\n    // side effect\n    saveState(getState().app);\n\n    // manual clean up is too complex\n    // we just reload the app\n    try {\n      window.location.reload();\n    } catch (err) {\n      // ignore\n    }\n  };\n}\n\n// unused\nexport function updateClashAPIConfig({ baseURL, secret }) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    const clashAPIConfig = { baseURL, secret };\n    dispatch('appUpdateClashAPIConfig', (s) => {\n      s.app.clashAPIConfigs[0] = clashAPIConfig;\n    });\n    // side effect\n    saveState(getState().app);\n    dispatch(closeModal('apiConfig'));\n    dispatch(fetchConfigs(clashAPIConfig));\n  };\n}\n\nconst bodyElement = document.body;\nfunction setTheme(theme = 'dark') {\n  if (theme === 'dark') {\n    bodyElement.classList.remove('light');\n    bodyElement.classList.add('dark');\n  } else {\n    bodyElement.classList.remove('dark');\n    bodyElement.classList.add('light');\n  }\n}\n\nexport function switchTheme() {\n  return (dispatch: DispatchFn, getState: GetStateFn) => {\n    const currentTheme = getTheme(getState());\n    const theme = currentTheme === 'light' ? 'dark' : 'light';\n    // side effect\n    setTheme(theme);\n    dispatch('storeSwitchTheme', (s) => {\n      s.app.theme = theme;\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function selectChartStyleIndex(\n  selectedChartStyleIndex: number | string\n) {\n  return (dispatch: DispatchFn, getState: GetStateFn) => {\n    dispatch('appSelectChartStyleIndex', (s) => {\n      s.app.selectedChartStyleIndex = Number(selectedChartStyleIndex);\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function updateAppConfig(name: string, value: unknown) {\n  return (dispatch: DispatchFn, getState: GetStateFn) => {\n    dispatch('appUpdateAppConfig', (s) => {\n      s.app[name] = value;\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function updateCollapsibleIsOpen(\n  prefix: string,\n  name: string,\n  v: boolean\n) {\n  return (dispatch: DispatchFn, getState: GetStateFn) => {\n    dispatch('updateCollapsibleIsOpen', (s: State) => {\n      s.app.collapsibleIsOpen[`${prefix}:${name}`] = v;\n    });\n    // side effect\n    saveStateDebounced(getState().app);\n  };\n}\n\nconst defaultClashAPIConfig = {\n  baseURL:\n    document.getElementById('app')?.getAttribute('data-base-url') ??\n    'http://127.0.0.1:9090',\n  secret: '',\n  addedAt: 0,\n};\n// type Theme = 'light' | 'dark';\nconst defaultState: StateApp = {\n  selectedClashAPIConfigIndex: 0,\n  clashAPIConfigs: [defaultClashAPIConfig],\n\n  latencyTestUrl: 'http://www.gstatic.com/generate_204',\n  selectedChartStyleIndex: 0,\n  theme: 'dark',\n\n  // type { [string]: boolean }\n  collapsibleIsOpen: {},\n  // how proxies are sorted in a group or provider\n  proxySortBy: 'Natural',\n  hideUnavailableProxies: false,\n  autoCloseOldConns: false,\n};\n\nfunction parseConfigQueryString() {\n  const { search } = window.location;\n  const collector: Record<string, string> = {};\n  if (typeof search !== 'string' || search === '') return collector;\n  const qs = search.replace(/^\\?/, '').split('&');\n  for (let i = 0; i < qs.length; i++) {\n    const [k, v] = qs[i].split('=');\n    collector[k] = encodeURIComponent(v);\n  }\n  return collector;\n}\n\nexport function initialState() {\n  let s = loadState();\n  s = { ...defaultState, ...s };\n  const query = parseConfigQueryString();\n\n  const conf = s.clashAPIConfigs[s.selectedClashAPIConfigIndex];\n  if (conf) {\n    const url = new URL(conf.baseURL);\n    if (query.hostname) {\n      url.hostname = query.hostname;\n    }\n    if (query.port) {\n      url.port = query.port;\n    }\n    // url.href is a stringifier and it appends a trailing slash\n    // that is not we want\n    conf.baseURL = trimTrailingSlash(url.href);\n    if (query.secret) {\n      conf.secret = query.secret;\n    }\n  }\n\n  if (query.theme === 'dark' || query.theme === 'light') {\n    s.theme = query.theme;\n  }\n  // set initial theme\n  setTheme(s.theme);\n  return s;\n}\n","import {\n  ClashGeneralConfig,\n  DispatchFn,\n  GetStateFn,\n  State,\n  StateConfigs,\n} from 'src/store/types';\nimport { ClashAPIConfig } from 'src/types';\n\nimport * as configsAPI from '../api/configs';\nimport * as trafficAPI from '../api/traffic';\nimport { openModal } from './modals';\n\nexport const getConfigs = (s: State) => s.configs.configs;\nexport const getHaveFetched = (s: State) => s.configs.haveFetchedConfig;\nexport const getLogLevel = (s: State) => s.configs.configs['log-level'];\n\nexport function fetchConfigs(apiConfig: ClashAPIConfig) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    let res: Response;\n    try {\n      res = await configsAPI.fetchConfigs(apiConfig);\n    } catch (err) {\n      // TypeError and AbortError\n      dispatch(openModal('apiConfig'));\n      return;\n    }\n\n    if (!res.ok) {\n      console.log('Error fetch configs', res.statusText);\n      dispatch(openModal('apiConfig'));\n      return;\n    }\n\n    const payload = await res.json();\n\n    dispatch('store/configs#fetchConfigs', (s) => {\n      s.configs.configs = payload;\n    });\n\n    const haveFetchedConfig = getHaveFetched(getState());\n\n    if (haveFetchedConfig) {\n      // normally user will land on the \"traffic chart\" page first\n      // calling this here will let the data start streaming\n      // the traffic chart should already subscribed to the streaming\n      trafficAPI.fetchData(apiConfig);\n    } else {\n      dispatch(markHaveFetchedConfig());\n    }\n  };\n}\n\nfunction markHaveFetchedConfig() {\n  return (dispatch: DispatchFn) => {\n    dispatch('store/configs#markHaveFetchedConfig', (s: State) => {\n      s.configs.haveFetchedConfig = true;\n    });\n  };\n}\n\nexport function updateConfigs(\n  apiConfig: ClashAPIConfig,\n  partialConfg: Partial<ClashGeneralConfig>\n) {\n  return async (dispatch: DispatchFn) => {\n    configsAPI\n      .updateConfigs(apiConfig, partialConfg)\n      .then(\n        (res) => {\n          if (res.ok === false) {\n            // eslint-disable-next-line no-console\n            console.log('Error update configs', res.statusText);\n          }\n        },\n        (err) => {\n          // eslint-disable-next-line no-console\n          console.log('Error update configs', err);\n          throw err;\n        }\n      )\n      .then(() => {\n        dispatch(fetchConfigs(apiConfig));\n      });\n\n    dispatch('storeConfigsOptimisticUpdateConfigs', (s) => {\n      s.configs.configs = { ...s.configs.configs, ...partialConfg };\n    });\n  };\n}\n\nexport const initialState: StateConfigs = {\n  configs: {\n    port: 7890,\n    'socks-port': 7891,\n    'redir-port': 0,\n    'allow-lan': false,\n    mode: 'Rule',\n    'log-level': 'info',\n  },\n  haveFetchedConfig: false,\n};\n","import { createSelector } from 'reselect';\n\nconst LogSize = 300;\n\nconst getLogs = (s) => s.logs.logs;\nconst getTail = (s) => s.logs.tail;\nexport const getSearchText = (s) => s.logs.searchText;\nexport const getLogsForDisplay = createSelector(\n  getLogs,\n  getTail,\n  getSearchText,\n  (logs, tail, searchText) => {\n    const x = [];\n    for (let i = tail; i >= 0; i--) {\n      x.push(logs[i]);\n    }\n    if (logs.length === LogSize) {\n      for (let i = LogSize - 1; i > tail; i--) {\n        x.push(logs[i]);\n      }\n    }\n\n    if (searchText === '') return x;\n    return x.filter((r) => r.payload.toLowerCase().indexOf(searchText) >= 0);\n  }\n);\n\nexport function updateSearchText(text) {\n  return (dispatch) => {\n    dispatch('logsUpdateSearchText', (s) => {\n      s.logs.searchText = text.toLowerCase();\n    });\n  };\n}\n\nexport function appendLog(log) {\n  return (dispatch, getState) => {\n    const s = getState();\n    const logs = getLogs(s);\n    const tailCurr = getTail(s);\n    const tail = tailCurr >= LogSize - 1 ? 0 : tailCurr + 1;\n    // mutate intentionally for performance\n    logs[tail] = log;\n\n    dispatch('logsAppendLog', (s) => {\n      s.logs.tail = tail;\n    });\n  };\n}\n\nexport const initialState = {\n  searchText: '',\n  logs: [],\n  // tail's initial value must be -1\n  tail: -1,\n};\n","export function openModal(modalName) {\n  return (dispatch) => {\n    dispatch(`openModal:${modalName}`, (s) => {\n      s.modals[modalName] = true;\n    });\n  };\n}\n\nexport function closeModal(modalName) {\n  return (dispatch) => {\n    dispatch(`closeModal:${modalName}`, (s) => {\n      s.modals[modalName] = false;\n    });\n  };\n}\n\nexport const initialState = { apiConfig: false };\n","import { getURLAndInit } from '../misc/request-helper';\nconst endpoint = '/proxies';\n\n/*\n$ curl \"http://127.0.0.1:8080/proxies/Proxy\" -XPUT -d '{ \"name\": \"ss3\" }' -i\nHTTP/1.1 400 Bad Request\nContent-Type: text/plain; charset=utf-8\n\n{\"error\":\"Selector update error: Proxy does not exist\"}\n\n~\n$ curl \"http://127.0.0.1:8080/proxies/GLOBAL\" -XPUT -d '{ \"name\": \"Proxy\" }' -i\nHTTP/1.1 204 No Content\n*/\n\nexport async function fetchProxies(config) {\n  const { url, init } = getURLAndInit(config);\n  const res = await fetch(url + endpoint, init);\n  return await res.json();\n}\n\nexport async function requestToSwitchProxy(apiConfig, name1, name2) {\n  const body = { name: name2 };\n  const { url, init } = getURLAndInit(apiConfig);\n  const fullURL = `${url}${endpoint}/${name1}`;\n  return await fetch(fullURL, {\n    ...init,\n    method: 'PUT',\n    body: JSON.stringify(body),\n  });\n}\n\nexport async function requestDelayForProxy(\n  apiConfig,\n  name,\n  latencyTestUrl = 'http://www.gstatic.com/generate_204'\n) {\n  const { url, init } = getURLAndInit(apiConfig);\n  const qs = `timeout=5000&url=${latencyTestUrl}`;\n  const fullURL = `${url}${endpoint}/${encodeURIComponent(name)}/delay?${qs}`;\n  return await fetch(fullURL, init);\n}\n\nexport async function fetchProviderProxies(config) {\n  const { url, init } = getURLAndInit(config);\n  const res = await fetch(url + '/providers/proxies', init);\n  if (res.status === 404) {\n    return { providers: {} };\n  }\n  return await res.json();\n}\n\nexport async function updateProviderByName(config, name) {\n  const { url, init } = getURLAndInit(config);\n  const options = { ...init, method: 'PUT' };\n  return await fetch(url + '/providers/proxies/' + name, options);\n}\n\nexport async function healthcheckProviderByName(config, name) {\n  const { url, init } = getURLAndInit(config);\n  const options = { ...init, method: 'GET' };\n  return await fetch(\n    url + '/providers/proxies/' + name + '/healthcheck',\n    options\n  );\n}\n","import { atom } from 'recoil';\n/* import { ProxyItem, ProxiesMapping, DelayMapping } from 'src/store/types'; */\nimport {\n  DispatchFn,\n  FormattedProxyProvider,\n  GetStateFn,\n  ProxiesMapping,\n  ProxyItem,\n  ProxyProvider,\n  State,\n  StateProxies,\n  SwitchProxyCtxItem,\n} from 'src/store/types';\nimport { ClashAPIConfig } from 'src/types';\n\nimport * as connAPI from '../api/connections';\nimport * as proxiesAPI from '../api/proxies';\nimport { getAutoCloseOldConns, getLatencyTestUrl } from './app';\n\nexport const initialState: StateProxies = {\n  proxies: {},\n  delay: {},\n  groupNames: [],\n  showModalClosePrevConns: false,\n};\n\nconst noop = () => null;\n\n// see all types:\n// https://github.com/Dreamacro/clash/blob/master/constant/adapters.go\n\n// const ProxyTypeBuiltin = ['DIRECT', 'GLOBAL', 'REJECT'];\n// const ProxyGroupTypes = ['Fallback', 'URLTest', 'Selector', 'LoadBalance'];\n// const ProxyTypes = ['Shadowsocks', 'Snell', 'Socks5', 'Http', 'Vmess'];\n\nexport const NonProxyTypes = [\n  'Direct',\n  'Fallback',\n  'Reject',\n  'Selector',\n  'URLTest',\n  'LoadBalance',\n  'Unknown',\n];\n\nexport const getProxies = (s: State) => s.proxies.proxies;\nexport const getDelay = (s: State) => s.proxies.delay;\nexport const getProxyGroupNames = (s: State) => s.proxies.groupNames;\nexport const getProxyProviders = (s: State) => s.proxies.proxyProviders || [];\nexport const getDangleProxyNames = (s: State) => s.proxies.dangleProxyNames;\nexport const getShowModalClosePrevConns = (s: State) =>\n  s.proxies.showModalClosePrevConns;\n\nexport function fetchProxies(apiConfig: ClashAPIConfig) {\n  return async (dispatch: any, getState: any) => {\n    const [proxiesData, providersData] = await Promise.all([\n      proxiesAPI.fetchProxies(apiConfig),\n      proxiesAPI.fetchProviderProxies(apiConfig),\n    ]);\n\n    const {\n      providers: proxyProviders,\n      proxies: providerProxies,\n    } = formatProxyProviders(providersData.providers);\n    const proxies = { ...providerProxies, ...proxiesData.proxies };\n    const [groupNames, proxyNames] = retrieveGroupNamesFrom(proxies);\n\n    const delayPrev = getDelay(getState());\n    const delayNext = { ...delayPrev };\n\n    for (let i = 0; i < proxyNames.length; i++) {\n      const name = proxyNames[i];\n      const { history } = proxies[name] || { history: [] };\n      const h = history[history.length - 1];\n      if (h && typeof h.delay === 'number') {\n        delayNext[name] = { number: h.delay };\n      }\n    }\n\n    // proxies that are not from a provider\n    const dangleProxyNames = [];\n    for (const v of proxyNames) {\n      if (!providerProxies[v]) dangleProxyNames.push(v);\n    }\n\n    dispatch('store/proxies#fetchProxies', (s: State) => {\n      s.proxies.proxies = proxies;\n      s.proxies.groupNames = groupNames;\n      s.proxies.delay = delayNext;\n      s.proxies.proxyProviders = proxyProviders;\n      s.proxies.dangleProxyNames = dangleProxyNames;\n    });\n  };\n}\n\nexport function updateProviderByName(apiConfig: ClashAPIConfig, name: string) {\n  return async (dispatch: DispatchFn) => {\n    try {\n      await proxiesAPI.updateProviderByName(apiConfig, name);\n    } catch (x) {\n      // ignore\n    }\n    // should be optimized\n    // but \\_()_/\n    dispatch(fetchProxies(apiConfig));\n  };\n}\n\nexport function updateProviders(apiConfig: ClashAPIConfig, names: string[]) {\n  return async (dispatch: DispatchFn) => {\n    for (let i = 0; i < names.length; i++) {\n      try {\n        await proxiesAPI.updateProviderByName(apiConfig, names[i]);\n      } catch (x) {\n        // ignore\n      }\n    }\n    // should be optimized\n    // but \\_()_/\n    dispatch(fetchProxies(apiConfig));\n  };\n}\n\nasync function healthcheckProviderByNameInternal(\n  apiConfig: ClashAPIConfig,\n  name: string\n) {\n  try {\n    await proxiesAPI.healthcheckProviderByName(apiConfig, name);\n  } catch (x) {\n    // ignore\n  }\n}\n\nexport function healthcheckProviderByName(\n  apiConfig: ClashAPIConfig,\n  name: string\n) {\n  return async (dispatch: DispatchFn) => {\n    await healthcheckProviderByNameInternal(apiConfig, name);\n    // should be optimized\n    // but \\_()_/\n    await dispatch(fetchProxies(apiConfig));\n  };\n}\n\nasync function closeGroupConns(\n  apiConfig: ClashAPIConfig,\n  groupName: string,\n  exceptionItemName: string\n) {\n  const res = await connAPI.fetchConns(apiConfig);\n  if (!res.ok) {\n    console.log('unable to fetch all connections', res.statusText);\n    /* throw new Error(); */\n  }\n  const json = await res.json();\n  const connections = json.connections;\n  const idsToClose = [];\n  for (const conn of connections) {\n    if (\n      // include the groupName\n      conn.chains.indexOf(groupName) > -1 &&\n      // but not include the itemName\n      conn.chains.indexOf(exceptionItemName) < 0\n    ) {\n      idsToClose.push(conn.id);\n    }\n  }\n\n  await Promise.all(\n    idsToClose.map((id) => connAPI.closeConnById(apiConfig, id).catch(noop))\n  );\n}\n\nfunction resolveChain(\n  proxies: ProxiesMapping,\n  groupName: string,\n  itemName: string\n) {\n  const chain = [itemName, groupName];\n\n  let child: ProxyItem;\n  let childKey = itemName;\n  while ((child = proxies[childKey]) && child.now) {\n    chain.unshift(child.now);\n    childKey = child.now;\n  }\n  return chain;\n}\n\nasync function switchProxyImpl(\n  dispatch: DispatchFn,\n  getState: GetStateFn,\n  apiConfig: ClashAPIConfig,\n  groupName: string,\n  itemName: string\n) {\n  try {\n    const res = await proxiesAPI.requestToSwitchProxy(\n      apiConfig,\n      groupName,\n      itemName\n    );\n    if (res.ok === false) {\n      throw new Error(`failed to switch proxy: res.statusText`);\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.log(err, 'failed to swith proxy');\n    throw err;\n  }\n\n  dispatch(fetchProxies(apiConfig));\n  const autoCloseOldConns = getAutoCloseOldConns(getState());\n  if (autoCloseOldConns) {\n    // use fresh state\n    const proxies = getProxies(getState());\n    // no wait\n    closePrevConns(apiConfig, proxies, { groupName, itemName });\n  }\n\n  /* dispatch('showModalClosePrevConns', (s: GlobalState) => { */\n  /*   s.proxies.showModalClosePrevConns = true; */\n  /*   s.proxies.switchProxyCtx = { to: { groupName, itemName } }; */\n  /* }); */\n}\n\nfunction closeModalClosePrevConns() {\n  return (dispatch: DispatchFn) => {\n    dispatch('closeModalClosePrevConns', (s: State) => {\n      s.proxies.showModalClosePrevConns = false;\n    });\n  };\n}\n\nfunction closePrevConns(\n  apiConfig: ClashAPIConfig,\n  proxies: ProxiesMapping,\n  switchTo: SwitchProxyCtxItem\n) {\n  // we must have fetched the proxies before\n  // so the proxies here is fresh\n  /* const proxies = s.proxies.proxies; */\n  const chain = resolveChain(proxies, switchTo.groupName, switchTo.itemName);\n  closeGroupConns(apiConfig, switchTo.groupName, chain[0]);\n}\n\nfunction closePrevConnsAndTheModal(apiConfig: ClashAPIConfig) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    const s = getState();\n    const switchTo = s.proxies.switchProxyCtx?.to;\n    if (!switchTo) {\n      dispatch(closeModalClosePrevConns());\n      return;\n    }\n\n    // we must have fetched the proxies before\n    // so the proxies here is fresh\n    const proxies = s.proxies.proxies;\n    closePrevConns(apiConfig, proxies, switchTo);\n\n    dispatch('closePrevConnsAndTheModal', (s: State) => {\n      s.proxies.showModalClosePrevConns = false;\n      s.proxies.switchProxyCtx = undefined;\n    });\n  };\n}\n\nexport function switchProxy(\n  apiConfig: ClashAPIConfig,\n  groupName: string,\n  itemName: string\n) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    // switch proxy asynchronously\n    switchProxyImpl(dispatch, getState, apiConfig, groupName, itemName).catch(\n      noop\n    );\n\n    // optimistic UI update\n    dispatch('store/proxies#switchProxy', (s) => {\n      const proxies = s.proxies.proxies;\n      if (proxies[groupName] && proxies[groupName].now) {\n        proxies[groupName].now = itemName;\n      }\n    });\n  };\n}\n\nfunction requestDelayForProxyOnce(apiConfig: ClashAPIConfig, name: string) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    const latencyTestUrl = getLatencyTestUrl(getState());\n    const res = await proxiesAPI.requestDelayForProxy(\n      apiConfig,\n      name,\n      latencyTestUrl\n    );\n    let error = '';\n    if (res.ok === false) {\n      error = res.statusText;\n    }\n    const { delay } = await res.json();\n\n    const delayPrev = getDelay(getState());\n    const delayNext = {\n      ...delayPrev,\n      [name]: {\n        error,\n        number: delay,\n      },\n    };\n\n    dispatch('requestDelayForProxyOnce', (s) => {\n      s.proxies.delay = delayNext;\n    });\n  };\n}\n\nexport function requestDelayForProxy(apiConfig: ClashAPIConfig, name: string) {\n  return async (dispatch: DispatchFn) => {\n    await dispatch(requestDelayForProxyOnce(apiConfig, name));\n  };\n}\n\nexport function requestDelayForProxies(\n  apiConfig: ClashAPIConfig,\n  names: string[]\n) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    const proxyNames = getDangleProxyNames(getState());\n\n    const works = names\n      // remove names that are provided by proxy providers\n      .filter((p) => proxyNames.indexOf(p) > -1)\n      .map((p) => dispatch(requestDelayForProxy(apiConfig, p)));\n    await Promise.all(works);\n    await dispatch(fetchProxies(apiConfig));\n  };\n}\n\nexport function requestDelayAll(apiConfig: ClashAPIConfig) {\n  return async (dispatch: DispatchFn, getState: GetStateFn) => {\n    const proxyNames = getDangleProxyNames(getState());\n    await Promise.all(\n      proxyNames.map((p) => dispatch(requestDelayForProxy(apiConfig, p)))\n    );\n    const proxyProviders = getProxyProviders(getState());\n    // one by one\n    for (const p of proxyProviders) {\n      await healthcheckProviderByNameInternal(apiConfig, p.name);\n    }\n    await dispatch(fetchProxies(apiConfig));\n  };\n}\n\nfunction retrieveGroupNamesFrom(proxies: Record<string, ProxyItem>) {\n  let groupNames = [];\n  let globalAll: string[];\n  const proxyNames = [];\n  for (const prop in proxies) {\n    const p = proxies[prop];\n    if (p.all && Array.isArray(p.all)) {\n      groupNames.push(prop);\n      if (prop === 'GLOBAL') {\n        globalAll = p.all;\n      }\n    } else if (NonProxyTypes.indexOf(p.type) < 0) {\n      proxyNames.push(prop);\n    }\n  }\n  if (globalAll) {\n    // Put GLOBAL in the end\n    globalAll.push('GLOBAL');\n    // Sort groups according to its index in GLOBAL group\n    groupNames = groupNames\n      .map((name) => [globalAll.indexOf(name), name])\n      .sort((a, b) => a[0] - b[0])\n      .map((group) => group[1]);\n  }\n  return [groupNames, proxyNames];\n}\n\ntype ProvidersRaw = {\n  [key: string]: ProxyProvider;\n};\n\nfunction formatProxyProviders(\n  providersInput: ProvidersRaw\n): {\n  providers: Array<FormattedProxyProvider>;\n  proxies: { [key: string]: ProxyItem };\n} {\n  const keys = Object.keys(providersInput);\n  const providers = [];\n  const proxies = {};\n  for (let i = 0; i < keys.length; i++) {\n    const provider: ProxyProvider = providersInput[keys[i]];\n    if (provider.name === 'default' || provider.vehicleType === 'Compatible') {\n      continue;\n    }\n    const proxiesArr = provider.proxies;\n    const names = [];\n    for (let j = 0; j < proxiesArr.length; j++) {\n      const proxy = proxiesArr[j];\n      proxies[proxy.name] = proxy;\n      names.push(proxy.name);\n    }\n\n    // mutate directly\n    provider.proxies = names;\n    providers.push(provider);\n  }\n\n  return {\n    providers,\n    proxies,\n  };\n}\n\nexport const actions = {\n  requestDelayForProxies,\n  closeModalClosePrevConns,\n  closePrevConnsAndTheModal,\n};\n\nexport const proxyFilterText = atom({\n  key: 'proxyFilterText',\n  default: '',\n});\n","// extracted by mini-css-extract-plugin\nexport default {\"overlay\":\"_2ueF0jmjym\",\"content\":\"UZ5fqyDCOb\"};","var startup = __webpack_require__.x;\n__webpack_require__.x = function() {\n\tvar result = startup();\n\t[776,88,170,857,641,272,981,507,497,736].map(__webpack_require__.E);\n\treturn result;\n};"],"sourceRoot":""}